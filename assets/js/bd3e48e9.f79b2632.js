"use strict";(self.webpackChunkdev_doc=self.webpackChunkdev_doc||[]).push([[387],{3031:(e,n,a)=>{a.r(n),a.d(n,{assets:()=>d,contentTitle:()=>r,default:()=>u,frontMatter:()=>o,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"lieux/creation","title":"Cr\xe9ation d\'un lieu","description":"Cr\xe9er un lieu sur un agenda en suivant la m\xe9thode usuelle ou avec un identifiant externe \xe0 OpenAgenda","source":"@site/docs/lieux/creation.md","sourceDirName":"lieux","slug":"/lieux/creation","permalink":"/lieux/creation","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenAgenda/dev-doc/docs/lieux/creation.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"title":"Cr\xe9ation d\'un lieu","description":"Cr\xe9er un lieu sur un agenda en suivant la m\xe9thode usuelle ou avec un identifiant externe \xe0 OpenAgenda","sidebar_position":3},"sidebar":"apiSidebar","previous":{"title":"Lecture","permalink":"/lieux/lecture"},"next":{"title":"\xc9dition","permalink":"/lieux/edition"}}');var t=a(1903),s=a(6338);const o={title:"Cr\xe9ation d'un lieu",description:"Cr\xe9er un lieu sur un agenda en suivant la m\xe9thode usuelle ou avec un identifiant externe \xe0 OpenAgenda",sidebar_position:3},r="Cr\xe9ation d'un lieu",d={},c=[{value:"En bref",id:"en-bref",level:2},{value:"Exemples",id:"exemples",level:2},{value:"Cr\xe9ation avec image",id:"cr\xe9ation-avec-image",level:3},{value:"node.js",id:"nodejs",level:4},{value:"Cr\xe9ation sans image",id:"cr\xe9ation-sans-image",level:3},{value:"node.js",id:"nodejs-1",level:4},{value:"Cr\xe9ation par un identifiant externe \xe0 OpenAgenda",id:"cr\xe9ation-par-un-identifiant-externe-\xe0-openagenda",level:2},{value:"Exemples",id:"exemples-1",level:3},{value:"node.js",id:"nodejs-2",level:4}];function l(e){const n={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"cr\xe9ation-dun-lieu",children:"Cr\xe9ation d'un lieu"})}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"POST /v2/agendas/{agendaUID}/locations\n"})}),"\n",(0,t.jsx)(n.h2,{id:"en-bref",children:"En bref"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"agendaUID"})," est l'identifiant unique de l'agenda o\xf9 le lieu est r\xe9f\xe9renc\xe9"]}),"\n",(0,t.jsxs)(n.li,{children:["Une ",(0,t.jsx)(n.a,{href:"/authentification",children:"authentification"})," en \xe9criture par jeton d'acc\xe8s est requise"]}),"\n",(0,t.jsx)(n.li,{children:"Si les coordonn\xe9es du lieu ne sont pas pr\xe9cis\xe9es, un g\xe9ocodage sera effectu\xe9 en amont de l'op\xe9ration de cr\xe9ation du lieu."}),"\n",(0,t.jsxs)(n.li,{children:["Les donn\xe9es d\xe9finissant le lieu sont \xe0 placer directement dans le corps de requ\xeate, elles sont d\xe9taill\xe9es ",(0,t.jsx)(n.a,{href:"/lieux/structure",children:"ici"}),". Le ",(0,t.jsx)(n.code,{children:"Content-Type"})," doit \xeatre de type ",(0,t.jsx)(n.code,{children:"application/json"}),"."]}),"\n",(0,t.jsxs)(n.li,{children:["La r\xe9ponse contient le d\xe9tail du lieu cr\xe9\xe9 sous une cl\xe9 ",(0,t.jsx)(n.code,{children:"location"})]}),"\n",(0,t.jsxs)(n.li,{children:["Si une image est charg\xe9e avec le lieu, le ",(0,t.jsx)(n.code,{children:"Content-Type"})," doit \xeatre de type ",(0,t.jsx)(n.code,{children:"multipart/form-data"}),", auquel cas les donn\xe9es du lieux sont \xe0 encoder en JSON et plac\xe9s sous une cl\xe9 ",(0,t.jsx)(n.code,{children:"data"}),", l'image \xe9tant un fichier plac\xe9 sous la cl\xe9 ",(0,t.jsx)(n.code,{children:"image"}),"."]}),"\n"]}),"\n",(0,t.jsx)(n.h2,{id:"exemples",children:"Exemples"}),"\n",(0,t.jsx)(n.h3,{id:"cr\xe9ation-avec-image",children:"Cr\xe9ation avec image"}),"\n",(0,t.jsx)(n.h4,{id:"nodejs",children:"node.js"}),"\n",(0,t.jsxs)(n.p,{children:["Exemple avec ",(0,t.jsx)(n.code,{children:"POST"})," en encodage ",(0,t.jsx)(n.code,{children:"multipart/form-data"})," o\xf9 une image est charg\xe9e avec le lieu:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"import FormData from 'form-data';\nimport axios from 'axios';\nimport getImageURL from './getImageURL.js';\nimport getAccessToken from './getAccessToken.js';\nimport getAgendaUID from './getAgendaUID.js';\n\nconst form = new FormData();\nconst imageURL = getImageURL();\nconst accessToken = getAccessToken();\nconst agendaUID = getAgendaUID();\n\nform.append('data', JSON.stringify({\n  name: 'Th\xe9\xe2tre Beaulieu',\n  address: '9 bis Bd Fran\xe7ois Blancho, 44200 Nantes',\n  countryCode: 'FR',\n  imageCredits: `Le nom de l'auteur`,\n}));\n\nconst { data: imageStream } = await axios({\n  method: 'get',\n  url: getURLEncoded(imageURL)  ,\n  responseType: 'stream',\n});\n\nform.append('image', imageStream);\n\nconst { data: { location: createdLocation } } = await axios({\n  method: 'post',\n  url: `https://api.openagenda.com/v2/agendas/${agendaUID}/locations`,\n  headers: {\n    ...form.getHeaders(),\n    'access-token': accessToken,\n  },\n  data: form,\n});\n"})}),"\n",(0,t.jsx)(n.h3,{id:"cr\xe9ation-sans-image",children:"Cr\xe9ation sans image"}),"\n",(0,t.jsx)(n.h4,{id:"nodejs-1",children:"node.js"}),"\n",(0,t.jsxs)(n.p,{children:["Exemple avec ",(0,t.jsx)(n.code,{children:"POST"})," en encodage ",(0,t.jsx)(n.code,{children:"application/json"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"import axios from 'axios';\nimport getImageURL from './getImageURL.js';\nimport getAccessToken from './getAccessToken.js';\nimport getAgendaUID from './getAgendaUID.js';\n\nconst { data: { location: createdLocation } } = await axios({\n  method: 'post',\n  url: `https://api.openagenda.com/v2/agendas/${getAgendaUID()}/locations`,\n  headers: {\n    'access-token': getAccessToken(),\n    'content-type': 'application/json'\n  },\n  data: {\n    name: 'Th\xe9\xe2tre Beaulieu',\n    address: '9 bis Bd Fran\xe7ois Blancho, 44200 Nantes',\n    countryCode: 'FR',\n    imageCredits: `Le nom de l'auteur`,\n  },\n});\n"})}),"\n",(0,t.jsx)(n.h2,{id:"cr\xe9ation-par-un-identifiant-externe-\xe0-openagenda",children:"Cr\xe9ation par un identifiant externe \xe0 OpenAgenda"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"PUT /v2/agendas/{agendaUID}/locations/ext/{key}/{value}\n"})}),"\n",(0,t.jsx)(n.p,{children:"###\xa0En bref"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"key"})," est le nom de l'identifiant, ",(0,t.jsx)(n.code,{children:"value"})," sa valeur"]}),"\n",(0,t.jsx)(n.li,{children:"Si le lieu existe d\xe9j\xe0, il sera mis \xe0 jour"}),"\n",(0,t.jsx)(n.li,{children:"Un lieu peut \xeatre associ\xe9 \xe0 plusieurs identifiants externes"}),"\n",(0,t.jsx)(n.li,{children:"Un lieu associ\xe9 \xe0 un ou plusieurs identifiants externes garde un identifiant OpenAgenda unique (UID)."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"exemples-1",children:"Exemples"}),"\n",(0,t.jsx)(n.h4,{id:"nodejs-2",children:"node.js"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-js",children:"import axios from 'axios';\nimport getImageURL from './getImageURL.js';\nimport getAccessToken from './getAccessToken.js';\nimport getAgendaUID from './getAgendaUID.js';\nimport getInfoNantesID from './getInfoNantesID.js';\n\nconst { data: { location: createdLocation } } = await axios({\n  method: 'put',\n  url: `https://api.openagenda.com/v2/agendas/${getAgendaUID()}/locations/ext/infonantes/${getInfoNantesID()}`,\n  headers: {\n    'access-token': getAccessToken(),\n    'content-type': 'application/json'\n  },\n  data: {\n    name: 'Th\xe9\xe2tre Beaulieu',\n    address: '9 bis Bd Fran\xe7ois Blancho, 44200 Nantes',\n    countryCode: 'FR',\n    imageCredits: `Le nom de l'auteur`,\n  },\n});\n"})})]})}function u(e={}){const{wrapper:n}={...(0,s.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},6338:(e,n,a)=>{a.d(n,{R:()=>o,x:()=>r});var i=a(7);const t={},s=i.createContext(t);function o(e){const n=i.useContext(s);return i.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function r(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:o(e.components),i.createElement(s.Provider,{value:n},e.children)}}}]);