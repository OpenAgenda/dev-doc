"use strict";(self.webpackChunkdev_doc=self.webpackChunkdev_doc||[]).push([[422],{7672:(e,s,n)=>{n.d(s,{R:()=>l,x:()=>c});var d=n(4897);const t={},i=d.createContext(t);function l(e){const s=d.useContext(i);return d.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function c(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:l(e.components),d.createElement(i.Provider,{value:s},e.children)}},9966:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>r,contentTitle:()=>c,default:()=>h,frontMatter:()=>l,metadata:()=>d,toc:()=>a});const d=JSON.parse('{"id":"agendas/schemas","title":"Sch\xe9mas et champs additionnels","description":"Le sch\xe9ma \xe9v\xe9nement d\'un agenda","source":"@site/docs/agendas/schemas.md","sourceDirName":"agendas","slug":"/agendas/schemas","permalink":"/agendas/schemas","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenAgenda/dev-doc/docs/agendas/schemas.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"apiSidebar","previous":{"title":"Lecture","permalink":"/agendas/lecture"},"next":{"title":"Sources","permalink":"/agendas/sources"}}');var t=n(4373),i=n(7672);const l={sidebar_position:3},c="Sch\xe9mas et champs additionnels",r={},a=[{value:"Le sch\xe9ma \xe9v\xe9nement d&#39;un agenda",id:"le-sch\xe9ma-\xe9v\xe9nement-dun-agenda",level:2},{value:"Les champs additionnels",id:"les-champs-additionnels",level:2},{value:"Types",id:"types",level:3},{value:"Exemple",id:"exemple",level:3}];function o(e){const s={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",header:"header",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(s.header,{children:(0,t.jsx)(s.h1,{id:"sch\xe9mas-et-champs-additionnels",children:"Sch\xe9mas et champs additionnels"})}),"\n",(0,t.jsx)(s.h2,{id:"le-sch\xe9ma-\xe9v\xe9nement-dun-agenda",children:"Le sch\xe9ma \xe9v\xe9nement d'un agenda"}),"\n",(0,t.jsxs)(s.p,{children:["Un agenda propose \xe0 sa cr\xe9ation un formulaire \xe9v\xe9nement d\xe9rivant d'un sch\xe9ma \xe9v\xe9nement standardis\xe9 sur la plateforme. Les champs constitutifs de ce schema sont d\xe9finis sous la cl\xe9 ",(0,t.jsx)(s.code,{children:"schema.fields"})," de ",(0,t.jsx)(s.a,{href:"/agendas/lecture",children:"la configuration d'un agenda"}),"."]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "title": ...,\n  "summary": {...},\n  "settings": {...},\n  ...,\n  "schema": {\n    "fields": [\n      ...\n    ]\n  },\n  ...\n}\n'})}),"\n",(0,t.jsx)(s.p,{children:"Chaque champ est d\xe9taill\xe9 par les cl\xe9s suivantes:"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Cl\xe9s"}),(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Description"}),(0,t.jsx)(s.th,{children:"Valeurs"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"field"})}),(0,t.jsx)(s.td,{children:"texte"}),(0,t.jsx)(s.td,{children:"Le code du champ, d\xe9rive du label initial"}),(0,t.jsxs)(s.td,{children:["Exemple : ",(0,t.jsx)(s.code,{children:"thematiques"})]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"fieldType"})}),(0,t.jsx)(s.td,{children:"texte"}),(0,t.jsx)(s.td,{children:"Le type du champ"}),(0,t.jsxs)(s.td,{children:["Exemples : ",(0,t.jsx)(s.code,{children:"checkbox"}),", ",(0,t.jsx)(s.code,{children:"radio"}),", ",(0,t.jsx)(s.code,{children:"select"}),", ",(0,t.jsx)(s.code,{children:"multiselect"}),", ",(0,t.jsx)(s.code,{children:"integer"}),", ",(0,t.jsx)(s.code,{children:"multilingual"}),", ",(0,t.jsx)(s.code,{children:"textarea"}),", ",(0,t.jsx)(s.code,{children:"markdown"}),", ",(0,t.jsx)(s.code,{children:"text"}),"..."]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsxs)(s.td,{children:[(0,t.jsx)(s.code,{children:"label"}),", ",(0,t.jsx)(s.code,{children:"info"}),", ",(0,t.jsx)(s.code,{children:"placeholder"}),", ",(0,t.jsx)(s.code,{children:"sub"})]}),(0,t.jsx)(s.td,{children:"texte"}),(0,t.jsx)(s.td,{children:"Texte ou multilingue. Des valeurs de labels utilis\xe9s pour l'affichage du champ sur le formulaire."}),(0,t.jsxs)(s.td,{children:["Exemple : ",(0,t.jsx)(s.code,{children:'{ "fr": "Th\xe9matiques" }'})]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"optional"})}),(0,t.jsx)(s.td,{children:"bool\xe9en"}),(0,t.jsxs)(s.td,{children:["Par d\xe9faut ",(0,t.jsx)(s.code,{children:"true"}),". Le caract\xe8re optionnel du champ. Si celui-ci est ",(0,t.jsx)(s.code,{children:"false"}),", le champ doit \xeatre inform\xe9 pour toute cr\xe9ation ou mise \xe0 jour de l'\xe9v\xe9nement."]}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"options"})}),(0,t.jsx)(s.td,{children:"objet[]"}),(0,t.jsxs)(s.td,{children:["Liste d'options pour les champs \xe0 choix (ex : ",(0,t.jsx)(s.code,{children:"radio"}),", ",(0,t.jsx)(s.code,{children:"checkbox"}),", ",(0,t.jsx)(s.code,{children:"select"}),"...). Pour les cr\xe9ations/mises \xe0 jour d'\xe9v\xe9nement, c'est la sous-cl\xe9 ",(0,t.jsx)(s.code,{children:"id"})," de l'option \xe0 pr\xe9ciser qui doit \xeatre sp\xe9cifi\xe9e dans le corps de requ\xeate en face du nom du champ."]}),(0,t.jsxs)(s.td,{children:["Exemple : ",(0,t.jsx)(s.code,{children:'[{"id": 1, "label": {"fr": "Musique"}, "value": "musique"}]'})]})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"schemaType"})}),(0,t.jsx)(s.td,{children:"texte"}),(0,t.jsxs)(s.td,{children:["Le type de sch\xe9ma d'o\xf9 provient le champ : ",(0,t.jsx)(s.code,{children:"event"})," pour les champs standards, ",(0,t.jsx)(s.code,{children:"agenda"})," ou ",(0,t.jsx)(s.code,{children:"network"})," pour les champs additionnels."]}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:(0,t.jsx)(s.code,{children:"languages"})}),(0,t.jsx)(s.td,{children:"texte[]"}),(0,t.jsx)(s.td,{children:"La liste des langues en cas de champs texte multilingues. Liste vide pour les champ o\xf9 les choix de langues sont libres"}),(0,t.jsxs)(s.td,{children:["Exemple ",(0,t.jsx)(s.code,{children:'["fr", "de"]'})]})]})]})]}),"\n",(0,t.jsx)(s.p,{children:"Par exemple, le titre d'un \xe9v\xe9nement est d\xe9crit comme ceci:"}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "languages": [],\n  "field": "title",\n  "fieldType": "text",\n  "optional": false,\n  "max": 150,\n  "label": {\n    "fr": "Titre",\n    "en": "Title",\n    "it": "Titolo",\n    "de": "Titel",\n    "es": "T\xedtulo"\n  },\n  "placeholder": {\n    "fr": "Le titre de votre \xe9v\xe9nement",\n    "en": "Title of your event",\n    "it": "Il titolo del tuo evento",\n    "de": "Titel Ihrer Veranstaltung",\n    "es": "El t\xedtulo de su evento"\n  },\n  "purpose": {\n    "fr": "Titre de l\'\xe9v\xe9nement",\n    "en": "Title of the event",\n    "es": "Nombre del evento"\n  },\n  "schemaType": "event"\n}\n'})}),"\n",(0,t.jsx)(s.h2,{id:"les-champs-additionnels",children:"Les champs additionnels"}),"\n",(0,t.jsxs)(s.p,{children:["Le sch\xe9ma standard \xe9v\xe9nement peut \xeatre compl\xe9t\xe9 de champs dits additionnels, d\xe9finits soit \xe0 l'\xe9chelle d'un agenda, soit d'un r\xe9seau. Lorsque c'est le cas, ces champs apparaissent dans la configuration ",(0,t.jsx)(s.code,{children:"schema"})," et ont un ",(0,t.jsx)(s.code,{children:"schemaType"})," qui pr\xe9cise la provenance de cette ajout: ",(0,t.jsx)(s.code,{children:"agenda"})," ou ",(0,t.jsx)(s.code,{children:"network"}),"."]}),"\n",(0,t.jsx)(s.h3,{id:"types",children:"Types"}),"\n",(0,t.jsxs)(s.p,{children:["Le type de chaque champ est pr\xe9cis\xe9 sous la cl\xe9 ",(0,t.jsx)(s.code,{children:"fieldType"}),". Un type se d\xe9cline principalement en trois cat\xe9gories:"]}),"\n",(0,t.jsxs)(s.ul,{children:["\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Les champs textuels"}),': texte simple, texte multi-ligne, HTML, markdown, multilingue. Dans ces cas, les valeurs sont directement associ\xe9es aux cl\xe9s "field" des champs sans conversion particuli\xe8re.']}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Les champs \xe0 options"}),": liste \xe0 choix unique, \xe0 choix multiple, select ou multi-select. Les valeurs associ\xe9es aux cl\xe9s dans ce cas sont les identifiants des options s\xe9lectionn\xe9es (voir exemple ci dessous)."]}),"\n",(0,t.jsxs)(s.li,{children:[(0,t.jsx)(s.strong,{children:"Les champs \xe0 fichiers"}),": ceux-cis ne sont pas manipulables par API"]}),"\n"]}),"\n",(0,t.jsx)(s.p,{children:"En voici la liste compl\xe8te:"}),"\n",(0,t.jsxs)(s.table,{children:[(0,t.jsx)(s.thead,{children:(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.th,{children:"Type"}),(0,t.jsx)(s.th,{children:"Cl\xe9"}),(0,t.jsx)(s.th,{children:"\xc0 options"}),(0,t.jsx)(s.th,{children:"Multilinguisme possible"})]})}),(0,t.jsxs)(s.tbody,{children:[(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Radio"}),(0,t.jsx)(s.td,{children:"radio"}),(0,t.jsx)(s.td,{children:"x"}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Checkbox"}),(0,t.jsx)(s.td,{children:"checkbox"}),(0,t.jsx)(s.td,{children:"x"}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Select"}),(0,t.jsx)(s.td,{children:"select"}),(0,t.jsx)(s.td,{children:"x"}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Multiselect"}),(0,t.jsx)(s.td,{children:"multiselect"}),(0,t.jsx)(s.td,{children:"x"}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Entier"}),(0,t.jsx)(s.td,{children:"integer"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Nombre"}),(0,t.jsx)(s.td,{children:"number"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Texte"}),(0,t.jsx)(s.td,{children:"text"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"x"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Texte multiligne"}),(0,t.jsx)(s.td,{children:"textearea"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"x"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Markdown"}),(0,t.jsx)(s.td,{children:"markdown"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"x"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"HTML"}),(0,t.jsx)(s.td,{children:"html"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{children:"x"})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Image"}),(0,t.jsx)(s.td,{children:"image"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]}),(0,t.jsxs)(s.tr,{children:[(0,t.jsx)(s.td,{children:"Fichier"}),(0,t.jsx)(s.td,{children:"file"}),(0,t.jsx)(s.td,{}),(0,t.jsx)(s.td,{})]})]})]}),"\n",(0,t.jsx)(s.h3,{id:"exemple",children:"Exemple"}),"\n",(0,t.jsxs)(s.p,{children:["Le cas le plus fr\xe9quent que l'on retrouve est qu'un formulaire \xe9v\xe9nement standard soit compl\xe9t\xe9 d'un champ de cat\xe9gories ou th\xe9matiques: un champ \xe0 choix de type ",(0,t.jsx)(s.code,{children:"radio"})," ou ",(0,t.jsx)(s.code,{children:"checkbox"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "field": "categories",\n  "label": "Cat\xe9gories",\n  "optional": false,\n  "options": [\n      {\n          "id": 1,\n          "value": "balade-decouverte-visite",\n          "label": "Balade - d\xe9couverte - visite"\n      },\n      {\n          "id": 2,\n          "value": "conference-rencontre-debat",\n          "label": "Conf\xe9rence - rencontre - d\xe9bat"\n      },\n      {\n          "id": 3,\n          "value": "exposition",\n          "label": "Exposition"\n      },\n      {\n          "id": 4,\n          "value": "fete-salon-marche",\n          "label": "F\xeate - salon - march\xe9"\n      },\n      {\n          "id": 5,\n          "value": "musique",\n          "label": "Musique"\n      },\n      ...\n  ],\n  "fieldType": "checkbox",\n  "schemaType": "network"\n}\n'})}),"\n",(0,t.jsxs)(s.p,{children:["Les \xe9v\xe9nements saisis et lus dans l'agenda verront leurs donn\xe9es compl\xe9t\xe9es d'une cl\xe9 reprenant el nom du champ additionnel: ",(0,t.jsx)(s.code,{children:"categories"}),":"]}),"\n",(0,t.jsx)(s.pre,{children:(0,t.jsx)(s.code,{className:"language-json",children:'{\n  "title": { "fr": "Festival d\'\xe9t\xe9" },\n  ...\n  "categories": [4],\n  ...\n}\n'})})]})}function h(e={}){const{wrapper:s}={...(0,i.R)(),...e.components};return s?(0,t.jsx)(s,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);