"use strict";(self.webpackChunkdev_doc=self.webpackChunkdev_doc||[]).push([[99],{7672:(e,i,n)=>{n.d(i,{R:()=>l,x:()=>s});var a=n(4897);const o={},t=a.createContext(o);function l(e){const i=a.useContext(t);return a.useMemo(function(){return"function"==typeof e?e(i):{...i,...e}},[i,e])}function s(e){let i;return i=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:l(e.components),a.createElement(t.Provider,{value:i},e.children)}},9715:(e,i,n)=>{n.r(i),n.d(i,{assets:()=>r,contentTitle:()=>s,default:()=>c,frontMatter:()=>l,metadata:()=>a,toc:()=>d});const a=JSON.parse('{"id":"lieux/edition","title":"\xc9dition d\'un lieu","description":"En bref","source":"@site/docs/lieux/edition.md","sourceDirName":"lieux","slug":"/lieux/edition","permalink":"/lieux/edition","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenAgenda/dev-doc/docs/lieux/edition.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"apiSidebar","previous":{"title":"Cr\xe9ation","permalink":"/lieux/creation"},"next":{"title":"Suppression","permalink":"/lieux/suppression"}}');var o=n(4373),t=n(7672);const l={sidebar_position:4},s="\xc9dition d'un lieu",r={},d=[{value:"En bref",id:"en-bref",level:2},{value:"Exemples",id:"exemples",level:2},{value:"Mise \xe0 jour du nom d&#39;un lieu",id:"mise-\xe0-jour-du-nom-dun-lieu",level:3},{value:"node.js",id:"nodejs",level:4},{value:"Mise \xe0 jour compl\xe8te",id:"mise-\xe0-jour-compl\xe8te",level:3},{value:"\xc9dition par un identifiant externe \xe0 OpenAgenda",id:"\xe9dition-par-un-identifiant-externe-\xe0-openagenda",level:2}];function u(e){const i={a:"a",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",li:"li",p:"p",pre:"pre",ul:"ul",...(0,t.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(i.header,{children:(0,o.jsx)(i.h1,{id:"\xe9dition-dun-lieu",children:"\xc9dition d'un lieu"})}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"[POST/PATCH] /v2/agendas/${agendaUID}/locations/${locationUID}\n"})}),"\n",(0,o.jsx)(i.h2,{id:"en-bref",children:"En bref"}),"\n",(0,o.jsxs)(i.ul,{children:["\n",(0,o.jsxs)(i.li,{children:[(0,o.jsx)(i.code,{children:"agendaUID"})," est l'identifiant unique de l'agenda o\xf9 le lieu est r\xe9f\xe9renc\xe9, ",(0,o.jsx)(i.code,{children:"locationUID"})," est l'identifiant unique du lieu"]}),"\n",(0,o.jsxs)(i.li,{children:["Une ",(0,o.jsx)(i.a,{href:"/authentification",children:"authentification"})," en \xe9criture par jeton d'acc\xe8s est requise"]}),"\n",(0,o.jsxs)(i.li,{children:["Les donn\xe9es d\xe9finissant le lieu sont \xe0 placer directement dans le corps de requ\xeate, elles sont d\xe9taill\xe9es ",(0,o.jsx)(i.a,{href:"/lieux/structure",children:"ici"}),". Le ",(0,o.jsx)(i.code,{children:"Content-Type"})," doit \xeatre de type ",(0,o.jsx)(i.code,{children:"application/json"}),"."]}),"\n",(0,o.jsxs)(i.li,{children:["La r\xe9ponse contient le d\xe9tail du lieu mis \xe0 jour sous une cl\xe9 ",(0,o.jsx)(i.code,{children:"location"})]}),"\n",(0,o.jsxs)(i.li,{children:["La m\xe9thode ",(0,o.jsx)(i.code,{children:"POST"})," est \xe0 utiliser pour les mises \xe0 jour compl\xe8tes, ",(0,o.jsx)(i.code,{children:"PATCH"})," pour les mises \xe0 jour partielles"]}),"\n",(0,o.jsxs)(i.li,{children:["Si une image est charg\xe9e avec le lieu, le ",(0,o.jsx)(i.code,{children:"Content-Type"})," doit \xeatre de type ",(0,o.jsx)(i.code,{children:"multipart/form-data"}),", auquel cas les donn\xe9es du lieux sont \xe0 encoder en JSON et plac\xe9s sous une cl\xe9 ",(0,o.jsx)(i.code,{children:"data"}),", l'image \xe9tant un fichier plac\xe9 sous la cl\xe9 ",(0,o.jsx)(i.code,{children:"image"}),"."]}),"\n"]}),"\n",(0,o.jsx)(i.h2,{id:"exemples",children:"Exemples"}),"\n",(0,o.jsx)(i.h3,{id:"mise-\xe0-jour-du-nom-dun-lieu",children:"Mise \xe0 jour du nom d'un lieu"}),"\n",(0,o.jsxs)(i.p,{children:["Le ",(0,o.jsx)(i.code,{children:"PATCH"})," permet de cibler les donn\xe9es \xe0 modifier."]}),"\n",(0,o.jsx)(i.h4,{id:"nodejs",children:"node.js"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-js",children:"import axios from 'axios';\nimport getImageURL from './getImageURL.js';\nimport getAccessToken from './getAccessToken.js';\nimport getAgendaUID from './getAgendaUID.js';\nimport getLocationUID from './getLocationUID.js';\n\nconst { data: { location: patchedLocation } } = await axios({\n  method: 'patch',\n  url: `https://api.openagenda.com/v2/agendas/${getAgendaUID()}/locations/${getLocationUID()}`,\n  headers: {\n    'access-token': getAccessToken(),\n    'content-type': 'application/json'\n  },\n  data: {\n    name: 'Maison des associations',\n  },\n});\n"})}),"\n",(0,o.jsx)(i.h3,{id:"mise-\xe0-jour-compl\xe8te",children:"Mise \xe0 jour compl\xe8te"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-js",children:"import axios from 'axios';\nimport getImageURL from './getImageURL.js';\nimport getAccessToken from './getAccessToken.js';\nimport getAgendaUID from './getAgendaUID.js';\nimport getLocationUID from './getLocationUID.js';\n\nconst { data: { location: updatedLocation } } = await axios({\n  method: 'post',\n  url: `https://api.openagenda.com/v2/agendas/${getAgendaUID()}/locations/${getLocationUID()}`,\n  headers: {\n    'access-token': getAccessToken(),\n    'content-type': 'application/json'\n  },\n  data: {\n    name: 'Site Gallo-Romain de la Croix-Guillaume',\n    address: 'Saint-Quirin, 57560 Saint-Quirin, France',\n    countryCode: 'FR',\n    adminLevel1: 'Grand Est',\n    adminLevel2: 'Moselle',\n    adminLevel3: 'Communaut\xe9 de communes Sarrebourg Moselle Sud',\n    city: 'Saint-Quirin',\n    postalCode: '57560',\n    insee: '57003',\n    latitude: 48.607757,\n    longitude: 7.0963,\n    timezone: 'Europe/Paris',\n    description: {\n      fr: 'Le site concentre sur un m\xeame plateau l\\'ensemble des fonctions d\\'un hameau antique : habitat, activit\xe9s \xe9conomiques, culte et n\xe9cropole. Il illustre l\\'occupation des hauteurs vosgiennes \xe0 l\\'\xe9poque gallo-romaine, du 1er au IIIe si\xe8cle apr\xe8s J\xe9sus-Christ.',\n      en: 'The site concentrates on the same plateau all the functions of an ancient hamlet: housing, economic activities, worship and necropolis. It illustrates the occupation of the Vosges heights during the Gallo-Roman period, from the 1st to the 3rd century AD.',\n      it: 'Il sito concentra su un unico altopiano tutte le funzioni di un antico borgo: abitazione, attivit\xe0 economiche, culto e necropoli. Illustra l\\'occupazione delle alture dei Vosgi in epoca gallo-romana, dal I al III secolo dopo Cristo.',\n      de: 'Der Standort konzentriert auf einem einzigen Plateau alle Funktionen eines antiken Weilers: Wohnraum, wirtschaftliche Aktivit\xe4ten, Kult und Nekropole. Es veranschaulicht die Besetzung der Vogesen-H\xf6hen in gallo-r\xf6mischer Zeit, vom 1\\\\. bis zum 3\\\\. Jahrhundert nach Christus.',\n      es: 'El sitio concentra en una misma meseta todas las funciones de un antiguo caser\xedo: h\xe1bitat, actividades econ\xf3micas, culto y necr\xf3polis. Ilustra la ocupaci\xf3n de las alturas vosgiennes en la \xe9poca galo-romana, del 1o al 3o siglo despu\xe9s de Cristo.'\n    },\n    website: 'https://www.tourisme-sarrebourg.fr/sit/848143929-la-croix-guillaume/',\n    email: 'an@email.com',\n    phone: '0378959056',\n    links: [],\n    access: {\n      fr: 'Situ\xe9 \xe0 quelques kilom\xe8tres \xe0 l\\'est du village, dans la for\xeat domaniale de Saint-Quirin, le site est accessible en voiture (10 mn de marche), ou bien \xe0 pied (3/4 d\\'heure de St-Quirin). A pied, au d\xe9part de la mairie, en direction du plan d\\'eau, suivre le balisage \"anneau jaune\" (circulaire des 7 roses) jusqu\u2019au carrefour de la \"Croix Guillaume\", puis le GR5 sur 200m. En voiture, direction Lettenbach, Abreschviller. Au col de \"Deux-Croix\", prendre la route des \"4 chemins\". Se garer \xe0 l\\'entr\xe9e du chemin de la \"Croix Guillaume\" et suivre le balisage \"anneau jaune\" jusqu\\'au carrefour de la Croix Guillaume\" puis le GR5 sur 200m. Le site est fl\xe9ch\xe9.',\n      en: 'Located a few kilometers east of the village, in the forest of Saint-Quirin, the site is accessible by car (10 minutes walk), or on foot (3/4 hour from St-Quirin). On foot, starting from the town hall, in the direction of the lake, follow the \"yellow ring\" (circular with 7 roses) until the crossroads of the \"Croix Guillaume\", then the GR5 for 200m. By car, direction Lettenbach, Abreschviller. At the \"Deux-Croix\" pass, take the \"4 paths\" road. Park at the entrance of the path \"Croix Guillaume\" and follow the signs \"yellow ring\" until the crossroads of Croix Guillaume\" then the GR5 on 200m. The site is signposted.',\n      it: 'Situato a pochi chilometri a est del villaggio, nella foresta demaniale di Saint-Quirin, il sito \xe8 accessibile in auto (10 minuti a piedi) o a piedi (3/4 ora da St-Quirin). A piedi, dal municipio, in direzione del lago, seguire il cartello \"anello giallo\" (circolare delle 7 rose) fino all\\'incrocio della \"Croix Guillaume\", poi il GR5 su 200m. In auto, direzione Lettenbach, Abreschviller. Al passo di \"Deux-Croix\", prendere la strada dei \"4 sentieri\". Parcheggiare all\\'ingresso del percorso \"Croix Guillaume\" e seguire la segnaletica \"anello giallo\" fino al bivio della Croix Guillaume\" poi il GR5 a 200m. Il sito \xe8 puntato.',\n      de: 'Das Hotel liegt ein paar Kilometer \xf6stlich des Dorfes, im Wald von Saint-Quirin, der Standort ist mit dem Auto (10 Minuten zu Fu\xdf) oder zu Fu\xdf (3/4 Stunde von St-Quirin). Zu Fu\xdf, vom Rathaus in Richtung Gew\xe4sser, folgen Sie der Beschilderung \"gelber Ring\" (Kreis von 7 Rosen) bis zur Kreuzung des \"Croix Guillaume\", dann GR5 auf 200m. Mit dem Auto in Richtung Lettenbach, Abreschviller. Am Col de \"Deux-Croix\" die Route der \"4 Wege\" nehmen. Parken am Eingang des Weges \"Croix Guillaume\" und folgen der Beschilderung \"gelber Ring\" bis zur Kreuzung von Croix Guillaume\", dann GR5 auf 200m. Die Website ist markiert.',\n      es: 'Situado a pocos kil\xf3metros al este del pueblo, en el bosque de Saint-Quirin, el sitio es accesible en coche (10 minutos a pie), o a pie (3/4 hora de St-Quirin). A pie, desde el ayuntamiento, hacia el plan de agua, siga la se\xf1alizaci\xf3n \"anillo amarillo\" (circular de 7 rosas) hasta el cruce de la \"Croix Guillaume\", luego el GR5 a 200 metros. En coche, direcci\xf3n Lettenbach, Abreschviller. En el paso de \"Deux-Croix\", tomar la carretera de los \"4 caminos\". Aparcar en la entrada del camino de \"Croix Guillaume\" y seguir el letrero \"anillo amarillo\" hasta el cruce de la Croix Guillaume\" y luego el GR5 a 200 metros. El sitio est\xe1 marcado.'\n    },\n    state: 1\n  },\n});\n"})}),"\n",(0,o.jsx)(i.h2,{id:"\xe9dition-par-un-identifiant-externe-\xe0-openagenda",children:"\xc9dition par un identifiant externe \xe0 OpenAgenda"}),"\n",(0,o.jsx)(i.pre,{children:(0,o.jsx)(i.code,{className:"language-bash",children:"PUT /v2/agendas/{agendaUID}/locations/ext/{key}/{value}\n"})}),"\n",(0,o.jsxs)(i.p,{children:["Document\xe9 ",(0,o.jsx)(i.a,{href:"/lieux/creation#cr%C3%A9ation-par-un-identifiant-externe-%C3%A0-openagenda",children:"ici"}),"."]})]})}function c(e={}){const{wrapper:i}={...(0,t.R)(),...e.components};return i?(0,o.jsx)(i,{...e,children:(0,o.jsx)(u,{...e})}):u(e)}}}]);