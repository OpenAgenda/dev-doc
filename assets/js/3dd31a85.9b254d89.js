"use strict";(self.webpackChunkdev_doc=self.webpackChunkdev_doc||[]).push([[650],{3209:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/embed-modal-82077b57bc4d251fec4b8f7ca074f21a.png"},4859:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>d,contentTitle:()=>l,default:()=>u,frontMatter:()=>t,metadata:()=>a,toc:()=>c});const a=JSON.parse('{"id":"plugins/embeds","title":"Code embed","description":"Ce code est disponible depuis la modale d\'export de tout agenda publi\xe9 sur OpenAgenda. Il permet d\'int\xe9grer simplement un agenda fonctionnel avec filtres, vue liste, vue d\xe9tail sur un site.","source":"@site/docs/plugins/embeds.md","sourceDirName":"plugins","slug":"/plugins/embeds","permalink":"/plugins/embeds","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenAgenda/dev-doc/docs/plugins/embeds.md","tags":[],"version":"current","sidebarPosition":1,"frontMatter":{"sidebar_position":1},"sidebar":"apiSidebar","previous":{"title":"Plugins & int\xe9grations","permalink":"/plugins/intro"},"next":{"title":"Extension Typo3","permalink":"/plugins/typo3"}}');var r=s(4373),i=s(7672);const t={sidebar_position:1},l="Code embed",d={},c=[{value:"Param\xe8tres",id:"param\xe8tres",level:2},{value:"Pr\xe9ciser l&#39;URL de la page h\xe9bergeant l&#39;agenda",id:"pr\xe9ciser-lurl-de-la-page-h\xe9bergeant-lagenda",level:3},{value:"Pr\xe9ciser le mode d&#39;ouverture des \xe9v\xe9nements cliqu\xe9s",id:"pr\xe9ciser-le-mode-douverture-des-\xe9v\xe9nements-cliqu\xe9s",level:3},{value:"Choix des filtres affich\xe9s",id:"choix-des-filtres-affich\xe9s",level:3},{value:"Choix de la couleur primaire",id:"choix-de-la-couleur-primaire",level:3},{value:"Ajustement des dimensions de la carte",id:"ajustement-des-dimensions-de-la-carte",level:3},{value:"Choix du tri des \xe9v\xe9nements",id:"choix-du-tri-des-\xe9v\xe9nements",level:3},{value:"Cacher le logo",id:"cacher-le-logo",level:3},{value:"Affichage du total",id:"affichage-du-total",level:3},{value:"Pr\xe9sentation des images",id:"pr\xe9sentation-des-images",level:3},{value:"Cas d&#39;usage",id:"cas-dusage",level:2},{value:"Ne pas rogner les images sur la vue liste",id:"ne-pas-rogner-les-images-sur-la-vue-liste",level:3},{value:"Afficher un aper\xe7u sur sa page d&#39;accueil d&#39;une variante compl\xe8te sur une page agenda de son site",id:"afficher-un-aper\xe7u-sur-sa-page-daccueil-dune-variante-compl\xe8te-sur-une-page-agenda-de-son-site",level:3},{value:"Configurer le gestionnaire de widgets OpenAgenda",id:"configurer-le-gestionnaire-de-widgets-openagenda",level:2},{value:"Pour des performances et une fiabilit\xe9 optimales, incluez le script widgets.js dans votre mod\xe8le",id:"pour-des-performances-et-une-fiabilit\xe9-optimales-incluez-le-script-widgetsjs-dans-votre-mod\xe8le",level:3},{value:"Ignorer les balises de script des int\xe9grations",id:"ignorer-les-balises-de-script-des-int\xe9grations",level:3},{value:"Initialisation du contenu int\xe9gr\xe9 apr\xe8s le chargement d&#39;une page",id:"initialisation-du-contenu-int\xe9gr\xe9-apr\xe8s-le-chargement-dune-page",level:2},{value:"\xc9v\xe9nements syst\xe8me",id:"\xe9v\xe9nements-syst\xe8me",level:2},{value:"Attente de ressources asynchrones",id:"attente-de-ressources-asynchrones",level:3}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",img:"img",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(n.header,{children:(0,r.jsx)(n.h1,{id:"code-embed",children:"Code embed"})}),"\n",(0,r.jsx)(n.p,{children:"Ce code est disponible depuis la modale d'export de tout agenda publi\xe9 sur OpenAgenda. Il permet d'int\xe9grer simplement un agenda fonctionnel avec filtres, vue liste, vue d\xe9tail sur un site."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.img,{alt:"Modale d&#39;export d&#39;un agenda",src:s(3209).A+""}),"\n",(0,r.jsx)(n.em,{children:"Modale d'export d'un agenda"})]}),"\n",(0,r.jsx)(n.p,{children:"La modale permet de faire les ajustements les plus usuels. Cette documentation permet d'aller au del\xe0 en compl\xe9tant le code de param\xe8tres dont le fonctionnement est d\xe9taill\xe9 dans la section suivante. Suivent 2 cas d'usages qui illustrent comment arriver \xe0 certains r\xe9sultats:"}),"\n",(0,r.jsxs)(n.ol,{children:["\n",(0,r.jsx)(n.li,{children:"Comment ne pas rogner les images en vue liste."}),"\n",(0,r.jsx)(n.li,{children:"Comment cr\xe9er 2 variantes du codes pour permettre la navigation d'une pr\xe9visualisation sur une page d'accueil de site vers une page agenda d\xe9taillant l'int\xe9gralit\xe9 d'une programmation."}),"\n"]}),"\n",(0,r.jsx)(n.h2,{id:"param\xe8tres",children:"Param\xe8tres"}),"\n",(0,r.jsx)(n.p,{children:"Liste exhaustive des param\xe8tres de configuration du code."}),"\n",(0,r.jsx)(n.h3,{id:"pr\xe9ciser-lurl-de-la-page-h\xe9bergeant-lagenda",children:"Pr\xe9ciser l'URL de la page h\xe9bergeant l'agenda"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Attribut"}),": ",(0,r.jsx)(n.code,{children:"data-base-url"})]}),"\n",(0,r.jsx)(n.p,{children:"Cet attribut permet de pr\xe9ciser la page agenda vers laquelle seront orient\xe9s les utilisateurs lors d'un clic sur un \xe9v\xe9nement de la liste."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Important :"})," L'URL pr\xe9cis\xe9e doit pointer vers une impl\xe9mentation d'agenda existante: le code d'int\xe9gration se contente de renvoyer le visiteur cliquant sur une vignette \xe9v\xe9nement vers ce lien, compl\xe9t\xe9 du code URL de l'\xe9v\xe9nement. Ce fonctionnement est compatible avec une impl\xe9mentation faite avec le ",(0,r.jsx)(n.a,{href:"https://developers.openagenda.com/module-drupal/",children:"module Drupal"})," ou la librairie ",(0,r.jsx)(n.a,{href:"https://www.npmjs.com/package/@openagenda/agenda-portal",children:"agenda-portal"}),"."]}),"\n",(0,r.jsxs)(n.p,{children:["En ajoutant l'attribut ",(0,r.jsx)(n.code,{children:'data-base-url="https://mon-site.com/agenda"'})," au ",(0,r.jsx)(n.code,{children:"<blockquote>"})," du code d'int\xe9gration les \xe9v\xe9nements seront ouverts dans un nouvel onglet sur la page ",(0,r.jsx)(n.code,{children:"https://mon-site.com/agenda/slug-evenement"}),"."]}),"\n",(0,r.jsx)(n.p,{children:"Exemple :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<blockquote\n  data-base-url="https://mon-site.com/agenda"\n  class="oa-agenda"\n  align="center"\n>\n  <p lang="fr">Voir les \xe9v\xe9nements de \n    <a\n      href="https://openagenda.com/agendas/5109558?relative%5B0%5D=current&relative%5B1%5D=upcoming">\n      <strong>F\xeate de la musique 2024</strong>\n    </a>\n  </p>\n</blockquote>\n<script async src="https://cdn.openagenda.com/js/widgets.js" charset="utf-8"><\/script>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["En pr\xe9cisant ",(0,r.jsx)(n.strong,{children:"oa"})," comme valeur plut\xf4t qu'une URL, le visiteur sera renvoy\xe9 vers le d\xe9tail de l'\xe9v\xe9nement sur ",(0,r.jsx)(n.a,{href:"https://openagenda.com",children:"openagenda.com"})]}),"\n",(0,r.jsx)(n.h3,{id:"pr\xe9ciser-le-mode-douverture-des-\xe9v\xe9nements-cliqu\xe9s",children:"Pr\xe9ciser le mode d'ouverture des \xe9v\xe9nements cliqu\xe9s"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Attribut"}),": ",(0,r.jsx)(n.code,{children:"data-base-url-target"})]}),"\n",(0,r.jsxs)(n.p,{children:["Cet attribut sp\xe9cifie si un \xe9v\xe9nement doit s'ouvrir dans un nouvel onglet, la page parent ou le document le plus \xe9lev\xe9 si il y a plusieurs niveaux d'iframes, les valeurs possibles sont _",(0,r.jsx)(n.em,{children:"blank"}),", ",(0,r.jsx)(n.em,{children:"_parent"}),", ",(0,r.jsx)(n.em,{children:"_top."})]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<blockquote\n  data-base-url="https://mon-site.com/agenda"\n  data-base-target="_blank"\n  class="oa-agenda"\n  align="center"\n>\n  <p lang="fr">Voir les \xe9v\xe9nements de <a\n    href="https://openagenda.com/agendas/5109558?relative%5B0%5D=current&relative%5B1%5D=upcoming"\n      >\n          <strong>F\xeate de la musique 2024</strong>\n      </a>\n  </p>\n</blockquote>\n<script async src="https://cdn.openagenda.com/js/widgets.js" charset="utf-8"><\/script>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"choix-des-filtres-affich\xe9s",children:"Choix des filtres affich\xe9s"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Attribut"}),": ",(0,r.jsx)(n.code,{children:"data-filters"})]}),"\n",(0,r.jsx)(n.p,{children:"Cet attribut permet de d\xe9finir la liste de filtres \xe0 afficher dans l'int\xe9gration. Les codes \xe0 fournir, s\xe9par\xe9s par des virgules, sont les m\xeames qu'utilis\xe9s en URL lorsque des filtres sont activ\xe9s sur l'accueil de l'agenda ou sur son administration."}),"\n",(0,r.jsx)(n.p,{children:"Exemple :"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<blockquote\n  class="oa-agenda"\n  align="center"\n  data-filters="search,geo,timings,themes,publics"\n>\n  <p lang="fr">Voir les \xe9v\xe9nements de \n    <a href="https://openagenda.com/agendas/64168411?relative%5B0%5D=current&relative%5B1%5D=upcoming">\n      <b>Limoges</b>\n    </a>\n  </p>\n</blockquote>\n<script async src="https://cdn.openagenda.com/js/widgets.js" charset="utf-8"><\/script>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"choix-de-la-couleur-primaire",children:"Choix de la couleur primaire"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Attribut"}),": ",(0,r.jsx)(n.code,{children:"data-primary-color"})]}),"\n",(0,r.jsx)(n.p,{children:"Cet attribut permet de pr\xe9ciser une couleur principale qui sera utilis\xe9e dans l'int\xe9gration."}),"\n",(0,r.jsx)(n.p,{children:"Exemple o\xf9 la couleur choisie est l'orange vif (#FF5733)"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<blockquote\n  class="oa-agenda"\n  align="center"\n  data-primary-color="#FF5733"\n>\n  <p lang="fr">Voir les \xe9v\xe9nements de \n    <a href="https://openagenda.com/agendas/64168411?relative%5B0%5D=current&relative%5B1%5D=upcoming">\n      <b>Limoges</b>\n    </a>\n  </p>\n</blockquote>\n<script async src="https://cdn.openagenda.com/js/widgets.js" charset="utf-8"><\/script>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"ajustement-des-dimensions-de-la-carte",children:"Ajustement des dimensions de la carte"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Attribut"}),": ",(0,r.jsx)(n.code,{children:"data-map-size"})]}),"\n",(0,r.jsx)(n.p,{children:"Permet de sp\xe9cifier une hauteur ou un ratio pour la carte."}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"height"}),": Pour une hauteur fixe (ex: ",(0,r.jsx)(n.code,{children:'data-map-size="height:400px"'}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"ratio"}),": Pour maintenir un ratio (ex: ",(0,r.jsx)(n.code,{children:'data-map-size="ratio:16/9"'}),")"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:"maxHeight"}),": Avec le ratio, limiter \xe0 une hauteur maximale (ex: ",(0,r.jsx)(n.code,{children:'data-map-size="ratio:16/9;maxHeight:400px"'})]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"choix-du-tri-des-\xe9v\xe9nements",children:"Choix du tri des \xe9v\xe9nements"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Attribut"}),": ",(0,r.jsx)(n.code,{children:"data-sort"})]}),"\n",(0,r.jsx)(n.p,{children:"Permet de sp\xe9cifier le tri des \xe9v\xe9nements affich\xe9s. La liste des possibles est donn\xe9e ici."}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"\xc0 noter"}),": quand une recherche texte est effectu\xe9e, le tri change et les r\xe9sultats affich\xe9s sont donn\xe9s par ordre de pertinence."]}),"\n",(0,r.jsx)(n.h3,{id:"cacher-le-logo",children:"Cacher le logo"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Attribut"}),": ",(0,r.jsx)(n.code,{children:"data-logo"})]}),"\n",(0,r.jsx)(n.p,{children:'Permet de cacher le logo OpenAgenda lorsque la valeur "hide" est fournie \xe0 l\'attribut.'}),"\n",(0,r.jsx)(n.h3,{id:"affichage-du-total",children:"Affichage du total"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Attribut"}),": ",(0,r.jsx)(n.code,{children:"data-display-total"})]}),"\n",(0,r.jsx)(n.p,{children:"Permet de sp\xe9cifier si le total d'\xe9v\xe9nements affich\xe9s doit apparaitre en t\xeate de liste. Il est affich\xe9 par d\xe9faut. Pr\xe9ciser \"0\" pour ne pas l'afficher."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<blockquote\n  class="oa-agenda"\n  align="center"\n  data-display-total="0"\n>\n  <p lang="fr">Voir les \xe9v\xe9nements de \n    <a href="https://openagenda.com/agendas/64168411">\n      <strong>Limoges</strong>\n    </a>\n  </p>\n</blockquote>\n<script async src="https://cdn.openagenda.com/js/widgets.js" charset="utf-8"><\/script>\n'})}),"\n",(0,r.jsx)(n.h3,{id:"pr\xe9sentation-des-images",children:"Pr\xe9sentation des images"}),"\n",(0,r.jsxs)(n.p,{children:[(0,r.jsx)(n.strong,{children:"Attribut"}),": ",(0,r.jsx)(n.code,{children:"data-image-list"})]}),"\n",(0,r.jsxs)(n.p,{children:["Permet de contr\xf4ler l'apparence des images affich\xe9es dans le widget. Plusieurs valeurs agissant sur des aspects diff\xe9rents des images peuvent \xeatre pr\xe9cis\xe9es. Il faut alors les s\xe9parer par un point-virgule ",(0,r.jsx)(n.code,{children:";"}),"."]}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"contain"})," ou ",(0,r.jsx)(n.code,{children:"cover"})]})," : Correspond \xe0 la propri\xe9t\xe9 CSS ",(0,r.jsx)(n.code,{children:"object-fit"}),"."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.strong,{children:(0,r.jsx)(n.code,{children:"ratio"})})," : D\xe9finit le ratio d'aspect via ",(0,r.jsx)(n.code,{children:"aspect-ratio"})," (exemple : ",(0,r.jsx)(n.code,{children:"ratio:1"})," pour un carr\xe9)."]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsxs)(n.strong,{children:[(0,r.jsx)(n.code,{children:"maxHeight"})," ou ",(0,r.jsx)(n.code,{children:"height"})]})," : Contr\xf4le la hauteur maximale ou fixe via ",(0,r.jsx)(n.code,{children:"max-height"})," ou ",(0,r.jsx)(n.code,{children:"height"})," (exemple : ",(0,r.jsx)(n.code,{children:"maxHeight:400px"}),")."]}),"\n"]}),"\n",(0,r.jsxs)(n.p,{children:["Dans l'exemple ci-dessous, les images utiliseront le mode ",(0,r.jsx)(n.code,{children:"contain"})," pour conserver leurs proportions et auront une hauteur maximale de 400 pixels."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<blockquote\n  class="oa-agenda"\n  align="center"\n  data-image-list="contain;maxHeight:400px"\n>\n  <p lang="fr">Voir les \xe9v\xe9nements de \n    <a href="https://openagenda.com/agendas/64168411?relative%5B0%5D=current&relative%5B1%5D=upcoming">\n      <b>Limoges</b>\n    </a>\n  </p>\n</blockquote>\n<script async src="https://cdn.openagenda.com/js/widgets.js" charset="utf-8"><\/script>\n'})}),"\n",(0,r.jsxs)(n.p,{children:["Dans le prochain exemple, les images seront affich\xe9es en mode ",(0,r.jsx)(n.code,{children:"cover"})," avec un ratio d\u2019aspect carr\xe9 (1:1)."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<blockquote\n  class="oa-agenda"\n  align="center"\n  data-image-list="cover;ratio:1"\n>\n  <p lang="fr">Voir les \xe9v\xe9nements de \n    <a href="https://openagenda.com/agendas/64168411?relative%5B0%5D=current&relative%5B1%5D=upcoming">\n      <strong>Limoges</strong>\n    </a>\n  </p>\n</blockquote>\n<script async src="https://cdn.openagenda.com/js/widgets.js" charset="utf-8"><\/script>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"cas-dusage",children:"Cas d'usage"}),"\n",(0,r.jsx)(n.h3,{id:"ne-pas-rogner-les-images-sur-la-vue-liste",children:"Ne pas rogner les images sur la vue liste"}),"\n",(0,r.jsx)(n.p,{children:"Par d\xe9faut, le format des images est rogn\xe9, dans le but de normaliser la hauteur des vignettes affich\xe9es en vue liste."}),"\n",(0,r.jsx)(n.p,{children:(0,r.jsx)(n.img,{src:s(7955).A+""})}),"\n",(0,r.jsxs)(n.p,{children:["Pour afficher les images dans un format non-rogn\xe9, il suffit d'ajouter un param\xe8tre au code en pr\xe9cisant le mode d'affichage et la hauteur maximale de l'image: ",(0,r.jsx)(n.strong,{children:'data-image-list="contain;maxHeight:400px"'})]}),"\n",(0,r.jsx)(n.h3,{id:"afficher-un-aper\xe7u-sur-sa-page-daccueil-dune-variante-compl\xe8te-sur-une-page-agenda-de-son-site",children:"Afficher un aper\xe7u sur sa page d'accueil d'une variante compl\xe8te sur une page agenda de son site"}),"\n",(0,r.jsx)(n.p,{children:"Le code d'int\xe9gration permet de simplement afficher une s\xe9lection d'\xe9v\xe9nements en aper\xe7u sur sa page d'accueil qui au clic renvoient vers une page agenda pr\xe9sentant une programmation plus compl\xe8te."}),"\n",(0,r.jsx)(n.p,{children:"Pour cr\xe9er un aper\xe7u, 3 param\xe8tres - document\xe9s en d\xe9tail dans la section pr\xe9c\xe9dente - seront utiles:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data-display-total"}),': \xe0 "0" pour ne pas afficher le total dans l\'aper\xe7u']}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"data-base-url"}),": pour cibler la page o\xf9 l'agenda est pr\xe9sent\xe9"]}),"\n",(0,r.jsxs)(n.li,{children:[(0,r.jsx)(n.code,{children:"&size=3"})," dans le lien de l'agenda pour ne pr\xe9senter que 3 \xe9v\xe9nements dans l'aper\xe7u"]}),"\n"]}),"\n",(0,r.jsx)(n.p,{children:"Voici un code pouvant \xeatre plac\xe9 sur l'accueil d'un agenda. Il renverra les utilisateurs vers une page /agenda ou aura \xe9t\xe9 plac\xe9 le code de l'agenda int\xe9gr\xe9 complet:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:'<blockquote\n  class="oa-agenda"\n  align="center"\n  data-base-url="/agenda"\n  data-display-total="0"\n>\n  <p lang="fr">Voir les \xe9v\xe9nements de \n    <a href="https://openagenda.com/agendas/64168411?size=3">\n      <strong>Limoges</strong>\n    </a>\n  </p>\n</blockquote>\n<script async src="https://cdn.openagenda.com/js/widgets.js" charset="utf-8"><\/script>\n'})}),"\n",(0,r.jsx)(n.h2,{id:"configurer-le-gestionnaire-de-widgets-openagenda",children:"Configurer le gestionnaire de widgets OpenAgenda"}),"\n",(0,r.jsx)(n.p,{children:"Le moyen le plus simple de cr\xe9er un widget OpenAgenda pour sites Web (un agenda, un \xe9v\xe9nement) consiste \xe0 copier et coller le code HTML g\xe9n\xe9r\xe9 dans la modale d'export."}),"\n",(0,r.jsx)(n.h3,{id:"pour-des-performances-et-une-fiabilit\xe9-optimales-incluez-le-script-widgetsjs-dans-votre-mod\xe8le",children:"Pour des performances et une fiabilit\xe9 optimales, incluez le script widgets.js dans votre mod\xe8le"}),"\n",(0,r.jsx)(n.p,{children:"Incluez le gestionnaire de widgets OpenAgenda une fois dans votre mod\xe8le de page pour optimiser les performances de votre page Web."}),"\n",(0,r.jsx)(n.p,{children:"Si votre site utilise plusieurs widgets, vous pouvez configurer une seule fois les widgets OpenAgenda dans vos pages, ce qui rendra votre site plus rapide."}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-html",children:"<script>window.oa = (function(d, s, id) {\n  var js, fjs = d.getElementsByTagName(s)[0],\n    t = window.oa || {};\n  if (d.getElementById(id)) return t;\n  js = d.createElement(s);\n  js.id = id;\n  js.src = '/index.js';\n  js.async = true;\n  fjs.parentNode.insertBefore(js, fjs);\n\n  t._e = [];\n  t.ready = function(f) {\n    t._e.push(f);\n  };\n\n  return t;\n}(document, 'script', 'oa-wjs'));<\/script>\n"})}),"\n",(0,r.jsx)(n.p,{children:"Cet extrait de code optimise le chargement de la mani\xe8re suivante\xa0:"}),"\n",(0,r.jsxs)(n.ul,{children:["\n",(0,r.jsxs)(n.li,{children:["Attribue un identifiant (ID) HTML unique, ",(0,r.jsx)(n.code,{children:"oa-wjs"}),", \xe0 l'\xe9l\xe9ment pour v\xe9rifier facilement si le fichier JavaScript est d\xe9j\xe0 pr\xe9sent sur la page. Si cet ID existe d\xe9j\xe0, le chargement est arr\xeat\xe9 imm\xe9diatement."]}),"\n",(0,r.jsx)(n.li,{children:"Charge le JavaScript de OpenAgenda de mani\xe8re asynchrone pour am\xe9liorer les performances des sites web."}),"\n",(0,r.jsx)(n.li,{children:"Initialise une file d'attente de fonctions asynchrones pour stocker les fonctions d\xe9pendantes jusqu'\xe0 ce que le script soit disponible."}),"\n",(0,r.jsxs)(n.li,{children:["Place cet extrait avant tout autre JavaScript sur votre page qui pourrait d\xe9pendre de la file d'attente de fonctions asynchrones ",(0,r.jsx)(n.code,{children:"oa.ready"}),"."]}),"\n"]}),"\n",(0,r.jsx)(n.h3,{id:"ignorer-les-balises-de-script-des-int\xe9grations",children:"Ignorer les balises de script des int\xe9grations"}),"\n",(0,r.jsxs)(n.p,{children:["Si vous incluez le chargeur JavaScript de Twitter sur chaque page, vous n'avez pas besoin d'inclure l'\xe9l\xe9ment ",(0,r.jsx)(n.code,{children:"<script>"})," g\xe9n\xe9r\xe9 par une modale d'export. Vous pouvez supprimer l'\xe9l\xe9ment ",(0,r.jsx)(n.code,{children:"<script>"})," suppl\xe9mentaire du code HTML g\xe9n\xe9r\xe9."]}),"\n",(0,r.jsx)(n.h2,{id:"initialisation-du-contenu-int\xe9gr\xe9-apr\xe8s-le-chargement-dune-page",children:"Initialisation du contenu int\xe9gr\xe9 apr\xe8s le chargement d'une page"}),"\n",(0,r.jsx)(n.p,{children:"La plupart des int\xe9grations d'OpenAgenda seront bien servies par le code d'int\xe9gration recommand\xe9 trouv\xe9 dans la modale d'export, mais vous souhaiterez peut-\xeatre optimiser comment et quand les widgets JavaScript d'OpenAgendaanalysent le DOM de la page pour d\xe9couvrir de nouveaux \xe9l\xe9ments HTML \xe9ligibles \xe0 une augmentation en widget."}),"\n",(0,r.jsxs)(n.p,{children:["Si le contenu est ins\xe9r\xe9 dynamiquement dans une page (par exemple, en cas de chargement diff\xe9r\xe9 ou en utilisant une technique ",(0,r.jsx)(n.code,{children:"pushState"})," pour naviguer entre les pages), il est n\xe9cessaire d'analyser les nouveaux widgets \xe0 l'aide de la fonction ",(0,r.jsx)(n.code,{children:"oa.widgets.load()"}),"."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"oa.widgets.load();\n"})}),"\n",(0,r.jsxs)(n.p,{children:["Appel\xe9 sans argument, ",(0,r.jsx)(n.code,{children:"widgets-js"})," recherchera dans toute l'arborescence DOM ",(0,r.jsx)(n.code,{children:"document.body"})," les widgets non initialis\xe9s. Pour de meilleures performances, transmettez un objet ",(0,r.jsx)(n.code,{children:"HTMLElement"})," pour restreindre la recherche uniquement aux enfants de l'\xe9l\xe9ment."]}),"\n",(0,r.jsx)(n.p,{children:"Exemple:"}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:'oa.widgets.load(  document.getElementById("container"));\n'})}),"\n",(0,r.jsx)(n.h2,{id:"\xe9v\xe9nements-syst\xe8me",children:"\xc9v\xe9nements syst\xe8me"}),"\n",(0,r.jsx)(n.h3,{id:"attente-de-ressources-asynchrones",children:"Attente de ressources asynchrones"}),"\n",(0,r.jsxs)(n.p,{children:["Charger le fichier ",(0,r.jsx)(n.code,{children:"widgets.js"})," de mani\xe8re asynchrone n\xe9cessitera d'attendre avant de lier les \xe9v\xe9nements : les fonctions que vous appelez n'existent pas encore. Vous devrez encapsuler vos liaisons d'\xe9v\xe9nements dans une fonction de rappel telle que la file d'attente de fonctions asynchrones ",(0,r.jsx)(n.code,{children:"oa.ready"}),", qui sera invoqu\xe9e une fois que tout sera charg\xe9."]}),"\n",(0,r.jsx)(n.pre,{children:(0,r.jsx)(n.code,{className:"language-js",children:"oa.ready(function (oa) {\n  // ...\n});\n"})})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,r.jsx)(n,{...e,children:(0,r.jsx)(o,{...e})}):o(e)}},7672:(e,n,s)=>{s.d(n,{R:()=>t,x:()=>l});var a=s(4897);const r={},i=a.createContext(r);function t(e){const n=a.useContext(i);return a.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(r):e.components||r:t(e.components),a.createElement(i.Provider,{value:n},e.children)}},7955:(e,n,s)=>{s.d(n,{A:()=>a});const a=s.p+"assets/images/embed-list-preview-7852ed7d81c869df94ac432292c247a2.png"}}]);