"use strict";(self.webpackChunkdev_doc=self.webpackChunkdev_doc||[]).push([[116],{6361:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>d,metadata:()=>r,toc:()=>c});const r=JSON.parse('{"id":"evenements/lecture","title":"Lecture d\'\xe9v\xe9nements d\'un agenda","description":"Lister des \xe9v\xe9nements","source":"@site/docs/evenements/lecture.md","sourceDirName":"evenements","slug":"/evenements/lecture","permalink":"/evenements/lecture","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenAgenda/dev-doc/docs/evenements/lecture.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"sidebar_position":2},"sidebar":"apiSidebar","previous":{"title":"Structure","permalink":"/evenements/structure"},"next":{"title":"Cr\xe9ation","permalink":"/evenements/creation"}}');var t=s(4373),i=s(7672);const d={sidebar_position:2},l="Lecture d'\xe9v\xe9nements d'un agenda",a={},c=[{value:"Lister des \xe9v\xe9nements",id:"lister-des-\xe9v\xe9nements",level:2},{value:"En bref",id:"en-bref",level:3},{value:"Filtres",id:"filtres",level:3},{value:"Param\xe8tres",id:"param\xe8tres",level:4},{value:"Champs additionnels",id:"champs-additionnels",level:4},{value:"Contenu",id:"contenu",level:3},{value:"Param\xe8tres",id:"param\xe8tres-1",level:4},{value:"Navigation",id:"navigation",level:3},{value:"Param\xe8tres",id:"param\xe8tres-2",level:4},{value:"Tris",id:"tris",level:4},{value:"R\xe9ponse                                                                                                                                                                                                  |",id:"r\xe9ponse--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",level:3},{value:"Quelques cas d&#39;usage",id:"quelques-cas-dusage",level:3},{value:"R\xe9cup\xe9rer tous les \xe9v\xe9nements \xe0 venir publi\xe9s sur un agenda",id:"r\xe9cup\xe9rer-tous-les-\xe9v\xe9nements-\xe0-venir-publi\xe9s-sur-un-agenda",level:4},{value:"Synchroniser une base de donn\xe9es \xe9v\xe9nementielle",id:"synchroniser-une-base-de-donn\xe9es-\xe9v\xe9nementielle",level:4},{value:"Export JSON",id:"export-json",level:3},{value:"Lire un \xe9v\xe9nement",id:"lire-un-\xe9v\xe9nement",level:2},{value:"Par son identifiant unique (uid)",id:"par-son-identifiant-unique-uid",level:3},{value:"En bref",id:"en-bref-1",level:4},{value:"Par un identifiant externe \xe0 OpenAgenda (extId)",id:"par-un-identifiant-externe-\xe0-openagenda-extid",level:3},{value:"En bref",id:"en-bref-2",level:4},{value:"Param\xe8tres",id:"param\xe8tres-3",level:4}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"lecture-d\xe9v\xe9nements-dun-agenda",children:"Lecture d'\xe9v\xe9nements d'un agenda"})}),"\n",(0,t.jsx)(n.h2,{id:"lister-des-\xe9v\xe9nements",children:"Lister des \xe9v\xe9nements"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events\n"})}),"\n",(0,t.jsx)(n.h3,{id:"en-bref",children:"En bref"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"agendaUID"})," est l'identifiant unique de l'agenda o\xf9 les \xe9v\xe9nements sont r\xe9f\xe9renc\xe9s."]}),"\n",(0,t.jsxs)(n.li,{children:["Une ",(0,t.jsx)(n.a,{href:"/authentification",children:"authentification"})," en lecture ou par jeton d'acc\xe8s est requise."]}),"\n",(0,t.jsx)(n.li,{children:"La r\xe9ponse contient un segment d'\xe9v\xe9nement plut\xf4t que la liste compl\xe8te. Si le total exc\xe8de le nombre de lieux rendus en un appel, une boucle de lecture devra \xeatre mise en place."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"filtres",children:"Filtres"}),"\n",(0,t.jsx)(n.h4,{id:"param\xe8tres",children:"Param\xe8tres"}),"\n",(0,t.jsx)(n.p,{children:"Les param\xe8tres suivant agissent sur la s\xe9lection des \xe9v\xe9nements rendus par un appel."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"removed"}),(0,t.jsx)(n.td,{children:"bool\xe9en(0|1"}),(0,t.jsx)(n.td,{children:"null)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"city"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtrer par ville.",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?city[]=Lausanne&city[]=Gen\xe8ve"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"department"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["...par D\xe9partement.",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?department[]=Hauts-de-Seine"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"region"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["...par R\xe9gion.",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?region=Normandie"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"timings[gte]"}),(0,t.jsx)(n.td,{children:"date"}),(0,t.jsxs)(n.td,{children:["...par horaire sup\xe9rieur \xe0 ...",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?timings[gte]=2025-...:00:00.000Z"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"timings[lte]"}),(0,t.jsx)(n.td,{children:"date"}),(0,t.jsxs)(n.td,{children:["Filtre par horaire inf\xe9rieur \xe0 ...",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?timings[lte]=2021-02-18T...00Z"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"updatedAt[gte]"}),(0,t.jsx)(n.td,{children:"date"}),(0,t.jsxs)(n.td,{children:["Mis \xe0 jour apr\xe8s le ...",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?updatedAt[gte]=2021-02-1...:00.000Z"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"updatedAt[lte]"}),(0,t.jsx)(n.td,{children:"date"}),(0,t.jsxs)(n.td,{children:["Mis \xe0 jour avant le ...",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?updatedAt[lte]=2021-02-...00.000Z"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"search"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Recherche synthaxique",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?search=Concert"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"uid"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtre par identifiant",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?uid[]=56158955&uid[]=55895615"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"slug"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtre par code url",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?slug=festival-dete"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"featured"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["En une",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?featured=1"})," (en une) vs ",(0,t.jsx)(n.code,{children:"?featured=0"})," (pas en une)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"relative"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Pass\xe9 / En cours / A venir",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?relative[]=passed"})," (\xe9v\xe9nements pass\xe9s), ",(0,t.jsx)(n.code,{children:"?relative[]=upcoming"})," (\xe9v\xe9nements \xe0 venir), ",(0,t.jsx)(n.code,{children:"?relative[]=current"}),"(\xe9v\xe9nements en cours: avec plages horaires pass\xe9es ET \xe0 venir)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"state"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Statut sur l'agenda",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?state=2"})," (publi\xe9 - valeur par d\xe9faut), ",(0,t.jsx)(n.code,{children:"?state=1"})," (pr\xeat \xe0 publier), ",(0,t.jsx)(n.code,{children:"?state=0"})," (\xe0 contr\xf4ler), ",(0,t.jsx)(n.code,{children:"?state=-1"})," (r\xe9fus\xe9). Les \xe9v\xe9nements non publi\xe9s ne sont accessibles que par les utilisateurs mod\xe9rateurs ou administrateurs."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"keyword"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Mots cl\xe9s",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?keyword[]=gratuit&keyword[]=exposition"})," fonction en ",(0,t.jsx)(n.code,{children:"ET"})," logique"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"geo"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtrer sur un carr\xe9 g\xe9ographique",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?geo[northEast][lat]=48.9527&geo[northEast][lng]=2.4484&geo[southWest][lat]=48.8560&geo[southWest][lng]=2.1801"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"locationUid"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtre par identifiant de lieu",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?locationUid[]=123&locationUid[]=456"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"accessibility"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtrer par accessibilit\xe9 particuli\xe8re",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?accessibility[]=hi&accessibility[]=vi"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"status"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtrer par \xe9tat",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?status[]=1"})]})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"champs-additionnels",children:"Champs additionnels"}),"\n",(0,t.jsx)(n.p,{children:"Les champs additionnels de types \xe0 choix (checkbox, radio, select) peuvent \xe9galement servir de base aux filtres. La cl\xe9 est alors le code du champ concern\xe9, les valeurs sont les identifiants \xe0 s\xe9lectionner."}),"\n",(0,t.jsxs)(n.p,{children:["Un exemple pour un champ additionnel Cat\xe9gories M\xe9tropolitaines dont le code serait ",(0,t.jsx)(n.code,{children:"categories-metropolitaines"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events?categories-metropolitaines[]=2\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Le fonctionnement des champs additionnels est d\xe9taill\xe9 ",(0,t.jsx)(n.a,{href:"/agendas/schemas",children:"ici"})]}),"\n",(0,t.jsx)(n.h3,{id:"contenu",children:"Contenu"}),"\n",(0,t.jsx)(n.h4,{id:"param\xe8tres-1",children:"Param\xe8tres"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"detailed"}),(0,t.jsx)(n.td,{children:"bool\xe9en(0|1)"}),(0,t.jsx)(n.td,{children:"Si \xe9gal a 1, rend l'int\xe9gralit\xe9 des donn\xe9es publiques li\xe9es \xe0 chaque \xe9v\xe9nement."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"monolingual"}),(0,t.jsx)(n.td,{children:"texte"}),(0,t.jsx)(n.td,{children:"Pr\xe9ciser un code langue (fr, en, it, de) pour ne renvoyer qu'une seule langue pour les champs multilingues ou les labels de champs additionnels. Si la langue choisie n'est pas d\xe9finie, une langue disponible sera utilis\xe9e."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"longDescriptionFormat"}),(0,t.jsx)(n.td,{children:"texte"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"markdown"})," par d\xe9faut. ",(0,t.jsx)(n.code,{children:"HTML"}),": le contenu du champ longDescription est rendu au format HTML. ",(0,t.jsx)(n.code,{children:"HTMLWithEmbeds"}),": le contenu du champ longDescription est rendu au format HTML et tout lien pointant vers des contenus multim\xe9dias de plateformes connues (Youtube, Soundcloud, Eventbrite, Pixlr...) sera remplac\xe9 par un contenu int\xe9gr\xe9."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"includeLabels"}),(0,t.jsx)(n.td,{children:"bool\xe9en(0|1)"}),(0,t.jsxs)(n.td,{children:["Inclure les labels dans les champs additionnels \xe0 choix.",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:'{"categorie": 1}'})," devient ",(0,t.jsx)(n.code,{children:'{"categorie": {"id": 1, "label": {"fr": "Spectacle"}}}'}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"includeFields"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Pr\xe9cise les donn\xe9es \xe0 remonter pour chaque \xe9v\xe9nement; utile \xe0 des fins d'optimisation de temps de r\xe9ponse et de bande passante. Variante courte: ",(0,t.jsx)(n.code,{children:"if[]="})," Ex: ",(0,t.jsx)(n.code,{children:"if[]=uid&if[]=location.city"})]})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Pro tip"})}),": utilisez ",(0,t.jsx)(n.code,{children:"detailed"})," en d\xe9veloppement et ",(0,t.jsx)(n.code,{children:"includeFields"})," en production pour r\xe9duire le volume de donn\xe9es qui transitent et am\xe9liorer les temps de r\xe9ponse."]}),"\n",(0,t.jsx)(n.h3,{id:"navigation",children:"Navigation"}),"\n",(0,t.jsx)(n.h4,{id:"param\xe8tres-2",children:"Param\xe8tres"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"after"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsx)(n.td,{children:"Sert \xe0 r\xe9cup\xe9rer les r\xe9sultats suivants le premier jeu d'\xe9v\xe9nements rendu, lorsque le total r\xe9sultant des filtres actifs est sup\xe9rieur au total du segment rendu."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"from"}),(0,t.jsx)(n.td,{children:"entier"}),(0,t.jsxs)(n.td,{children:["Alternative \xe0 ",(0,t.jsx)(n.code,{children:"after"}),". Permet de r\xe9cup\xe9rer les r\xe9sultats \xe0 partir du n-i\xe8me \xe9v\xe9nement. Pr\xe9f\xe9rer l'utilisation de la cl\xe9 after pour de meilleures performances, en particulier pour les lectures plus compl\xe8tes (> 500 \xe9v\xe9nements)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"size"}),(0,t.jsx)(n.td,{children:"entier"}),(0,t.jsxs)(n.td,{children:["D\xe9finit le nombre d'\xe9v\xe9nements r\xe9cup\xe9r\xe9s par appel. Valeur par d\xe9faut: ",(0,t.jsx)(n.strong,{children:"20"}),". Valeur maximale possible: ",(0,t.jsx)(n.strong,{children:"300"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"sort"}),(0,t.jsx)(n.td,{children:"texte"}),(0,t.jsx)(n.td,{children:"Choix du tri \xe0 appliquer"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"tris",children:"Tris"}),"\n",(0,t.jsxs)(n.p,{children:["Les tris suivants sont possibles. Il sont \xe0 placer dans un param\xe8tre ",(0,t.jsx)(n.code,{children:"sort"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Valeur"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"timingsWithFeatured.asc"}),(0,t.jsx)(n.td,{children:"Tri par d\xe9faut. Ev\xe9n\xe9ments en une en premier, puis tri chronologique en fonction de la prochaine plage horaire \xe0 venir."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"timings.asc"}),(0,t.jsx)(n.td,{children:"Tri chronologique en fonction de la prochaine plage horaire \xe0 venir. Les \xe9v\xe9nements aux plages horaires \xe0 venir les plus proches d'abord jusqu'au plus lointaines \xe0 venir, suivi des \xe9v\xe9nements aux plages horaires les plus proches dans le pass\xe9 aux plus lointaines."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"lastTiming.asc"}),(0,t.jsx)(n.td,{children:"Tri chronologique en fonction de la derni\xe8re plage horaire \xe0 venir, suivi des \xe9v\xe9nements aux plages horaires les plus proches dans le pass\xe9 aux plus lointaines."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"lastTimingWithFeatured.asc"}),(0,t.jsx)(n.td,{children:"Comme lastTiming.asc mais avec les \xe9v\xe9nements en une en premier."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"updatedAt.desc"}),(0,t.jsx)(n.td,{children:"Ev\xe9nements mis \xe0 jour le plus r\xe9cemment en premier"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"updatedAt.asc"}),(0,t.jsx)(n.td,{children:"Ev\xe9nements mis \xe0 jour le plus r\xe9cemment en dernier"})]})]})]}),"\n",(0,t.jsx)(n.h3,{id:"r\xe9ponse--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------",children:"R\xe9ponse                                                                                                                                                                                                  |"}),"\n",(0,t.jsx)(n.p,{children:"La r\xe9ponse pr\xe9sente les donn\xe9es sous les cl\xe9s suivantes:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"total"}),(0,t.jsx)(n.td,{children:"entier"}),(0,t.jsx)(n.td,{children:"Le nombre total de membres"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"events"}),(0,t.jsx)(n.td,{children:"objet[]"}),(0,t.jsx)(n.td,{children:"Segment d'\xe9v\xe9nements correspondants aux filtres"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"sort"}),(0,t.jsx)(n.td,{children:"texte"}),(0,t.jsx)(n.td,{children:"Tri effectif"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"after"}),(0,t.jsx)(n.td,{children:"textes[]"}),(0,t.jsx)(n.td,{children:"Valeurs \xe0 placer dans l'appel suivant pour r\xe9cup\xe9rer le segment d'\xe9v\xe9nements suivant"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Les \xe9v\xe9nements sont pr\xe9sent\xe9s selon la structure d\xe9taill\xe9e ",(0,t.jsx)(n.a,{href:"/evenements/structure",children:"ici"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"quelques-cas-dusage",children:"Quelques cas d'usage"}),"\n",(0,t.jsx)(n.h4,{id:"r\xe9cup\xe9rer-tous-les-\xe9v\xe9nements-\xe0-venir-publi\xe9s-sur-un-agenda",children:"R\xe9cup\xe9rer tous les \xe9v\xe9nements \xe0 venir publi\xe9s sur un agenda"}),"\n",(0,t.jsxs)(n.p,{children:["Dans le cas o\xf9 l'objectif est de reprendre l'int\xe9gralit\xe9 des \xe9v\xe9nements correspondant \xe0 un filtre donn\xe9, une suite d'appels sera n\xe9cessaire lorsque le total exc\xe8de la taille maximale d'\xe9v\xe9nements r\xe9cup\xe9rables en un appel (",(0,t.jsx)(n.code,{children:"300"}),")."]}),"\n",(0,t.jsxs)(n.p,{children:["Pour cet exemple, le souhait est de r\xe9cup\xe9rer tous les \xe9v\xe9nements en cours et \xe0 venir publi\xe9s sur l'agenda: le filtre ",(0,t.jsx)(n.code,{children:"relative"})," sert dans ce cas. Un premier appel est fait pour r\xe9cup\xe9rer le premier segment des r\xe9sultats:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events?relative[]=current&relative[]=upcoming\n"})}),"\n",(0,t.jsx)(n.p,{children:"Le r\xe9sultat rendu a la forme suivante, il fournit les 20 premiers \xe9v\xe9nements des 872 \xe9v\xe9nements correspondants au filtre demand\xe9:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "total": 872,\n  "events": [...],\n  "after": ["0", "000001758268800", "1758472200000", "5335740"]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Les valeurs fournies sous la cl\xe9 ",(0,t.jsx)(n.code,{children:"after"})," permettent de r\xe9cup\xe9rer les 20 \xe9v\xe9nements suivants:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events?relative[]=current&relative[]=upcoming&after[]=0&after[]=000001758268800&after[]=1758472200000&after[]=5335740\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Et ainsi de suite jusqu'\xe0 arriver aux derniers \xe9v\xe9nements. La derni\xe8re r\xe9ponse fournira un ",(0,t.jsx)(n.code,{children:"after"})," \xe0 ",(0,t.jsx)(n.code,{children:"null"})," indiquant qu'il n'y a plus d'autres \xe9v\xe9nements \xe0 r\xe9cup\xe9rer."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "total": 872,\n  "events": [...],\n  "after": null\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"synchroniser-une-base-de-donn\xe9es-\xe9v\xe9nementielle",children:"Synchroniser une base de donn\xe9es \xe9v\xe9nementielle"}),"\n",(0,t.jsxs)(n.p,{children:["Un script synchronisant la programmation d'un agenda avec une base tiers \xe0 intervalle r\xe9gulier peut fonctionner en r\xe9cup\xe9rant l'int\xe9gralit\xe9 de la programmation lors de sa premi\xe8re execution puis en se ",(0,t.jsx)(n.strong,{children:"limitant"})," au traitement des ",(0,t.jsx)(n.strong,{children:"ajouts, modifications et suppressions"})," entre chaque nouvelle execution. Les param\xe8tres suivants sont utiles pour y parvenir:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"updatedAt[gte]"}),": pr\xe9ciser la derni\xe8re execution du script pour limiter la s\xe9lection aux \xe9v\xe9nements mis \xe0 jour depuis"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"removed"}),": ",(0,t.jsx)(n.code,{children:"null"})," pour ",(0,t.jsx)(n.strong,{children:"inclure"})," les \xe9v\xe9nements qui ont \xe9t\xe9 retir\xe9s de la programmation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"sort"}),": ",(0,t.jsx)(n.code,{children:"updatedAt.asc"}),": optionnellement, trier la s\xe9lection suivant l'ordre des mise \xe0 jour pour simplifier la lecture"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"... et dans cet exemple, nous ne nous int\xe9ressons qu'aux textes fran\xe7ais."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events?updatedAt[gte]=2025-07-11T13:49:58.000Z&removed=null&monolingual=fr\n"})}),"\n",(0,t.jsx)(n.p,{children:"Le r\xe9sultat ressemblera \xe0 ceci:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "total": 462,\n  "events": [\n    {\n      "uid": 50976230,\n      "removed": true,\n      "updatedAt": "2025-07-11T13:49:59.024Z"\n    },\n    {\n      "uid": 1325588,\n      "removed": false,\n      "updatedAt": "2025-07-11T13:52:05.000Z",\n      "createdAt": "2025-07-11T13:52:05.000Z",\n      "title": "Visite de l\'H\xf4tel de ville de Belfort",\n      ...\n    },\n    ...\n  ],\n  "after": ["1753800986069", "43733206"]\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Les identifiants des \xe9v\xe9nements retir\xe9s suffisent pour r\xe9percuter l'op\xe9ration de retrait sur la base synchronis\xe9e, les autres \xe9v\xe9nements peuvent \xeatre soit cr\xe9\xe9s, soit mis \xe0 jour"}),"\n",(0,t.jsx)(n.h3,{id:"export-json",children:"Export JSON"}),"\n",(0,t.jsxs)(n.p,{children:["L'export JSON anciennement propos\xe9 sur la modale d'export des agendas OpenAgenda est ",(0,t.jsx)(n.strong,{children:"en fin de vie"}),". La documentation de cet export ",(0,t.jsx)(n.a,{href:"/evenements/export-json",children:"est consultable ici"}),", une aide pour migrer les synchronisations ",(0,t.jsx)(n.a,{href:"/evenements/export-json-migration",children:"est propos\xe9e ici"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"lire-un-\xe9v\xe9nement",children:"Lire un \xe9v\xe9nement"}),"\n",(0,t.jsx)(n.h3,{id:"par-son-identifiant-unique-uid",children:"Par son identifiant unique (uid)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events/{eventUID}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"en-bref-1",children:"En bref"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"agendaUID"})," est l'identifiant unique de l'agenda o\xf9 l'\xe9v\xe9nement est r\xe9f\xe9renc\xe9, ",(0,t.jsx)(n.code,{children:"eventUID"})," son identifiant unique."]}),"\n",(0,t.jsxs)(n.li,{children:["Une ",(0,t.jsx)(n.a,{href:"/authentification",children:"authentification"})," en lecture ou par jeton d'acc\xe8s est requise."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"par-un-identifiant-externe-\xe0-openagenda-extid",children:"Par un identifiant externe \xe0 OpenAgenda (extId)"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events/ext/{key}/{value}\n"})}),"\n",(0,t.jsx)(n.h4,{id:"en-bref-2",children:"En bref"}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"agendaUID"})," est l'identifiant unique de l'agenda o\xf9 l'\xe9v\xe9nement est r\xe9f\xe9renc\xe9, ",(0,t.jsx)(n.code,{children:"key"})," est le code de l'identifiant externe et ",(0,t.jsx)(n.code,{children:"value"})," sa valeur."]}),"\n",(0,t.jsxs)(n.li,{children:["Une ",(0,t.jsx)(n.a,{href:"/authentification",children:"authentification"})," en lecture ou par jeton d'acc\xe8s est requise."]}),"\n"]}),"\n",(0,t.jsx)(n.h4,{id:"param\xe8tres-3",children:"Param\xe8tres"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"longDescriptionFormat"}),(0,t.jsx)(n.td,{children:"texte"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"markdown"})," par d\xe9faut. ",(0,t.jsx)(n.code,{children:"HTML"}),": le contenu du champ longDescription est rendu au format HTML. ",(0,t.jsx)(n.code,{children:"HTMLWithEmbeds"}),": le contenu du champ longDescription est rendu au format HTML et tout lien pointant vers des contenus multim\xe9dias de plateformes connues (Youtube, Soundcloud, Eventbrite, Pixlr...) sera remplac\xe9 par un contenu int\xe9gr\xe9."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"includeLabels"}),(0,t.jsx)(n.td,{children:"bool\xe9en(0|1)"}),(0,t.jsxs)(n.td,{children:["Inclure les labels dans les champs additionnels \xe0 choix.",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:'{"categorie": 1}'})," devient ",(0,t.jsx)(n.code,{children:'{"categorie": {"id": 1, "label": {"fr": "Spectacle"}}}'}),"."]})]})]})]})]})}function h(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}},7672:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>l});var r=s(4897);const t={},i=r.createContext(t);function d(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);