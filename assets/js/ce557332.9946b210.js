"use strict";(self.webpackChunkdev_doc=self.webpackChunkdev_doc||[]).push([[116],{6338:(e,n,s)=>{s.d(n,{R:()=>d,x:()=>l});var r=s(7);const t={},i=r.createContext(t);function d(e){const n=r.useContext(i);return r.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:d(e.components),r.createElement(i.Provider,{value:n},e.children)}},9235:(e,n,s)=>{s.r(n),s.d(n,{assets:()=>c,contentTitle:()=>l,default:()=>u,frontMatter:()=>d,metadata:()=>r,toc:()=>a});const r=JSON.parse('{"id":"evenements/lecture","title":"Lecture d\'\xe9v\xe9nements","description":"Lister ou consulter un \xe9v\xe9nement d\'un agenda","source":"@site/docs/evenements/lecture.md","sourceDirName":"evenements","slug":"/evenements/lecture","permalink":"/evenements/lecture","draft":false,"unlisted":false,"editUrl":"https://github.com/OpenAgenda/dev-doc/docs/evenements/lecture.md","tags":[],"version":"current","sidebarPosition":2,"frontMatter":{"title":"Lecture d\'\xe9v\xe9nements","description":"Lister ou consulter un \xe9v\xe9nement d\'un agenda","sidebar_position":2,"toc_min_heading_level":2,"toc_max_heading_level":5},"sidebar":"apiSidebar","previous":{"title":"Structure","permalink":"/evenements/structure"},"next":{"title":"Cr\xe9ation","permalink":"/evenements/creation"}}');var t=s(1903),i=s(6338);const d={title:"Lecture d'\xe9v\xe9nements",description:"Lister ou consulter un \xe9v\xe9nement d'un agenda",sidebar_position:2,toc_min_heading_level:2,toc_max_heading_level:5},l="Lecture d'\xe9v\xe9nements",c={},a=[{value:"Lister les \xe9v\xe9nements d&#39;un agenda",id:"lister-les-\xe9v\xe9nements-dun-agenda",level:2},{value:"Filtres",id:"filtres",level:3},{value:"Filtres standards",id:"filtres-standards",level:4},{value:"Filtres de champs additionnels",id:"filtres-de-champs-additionnels",level:4},{value:"Contenu",id:"contenu",level:3},{value:"Navigation",id:"navigation",level:3},{value:"Tris",id:"tris",level:4},{value:"Comprendre l&#39;ordre des r\xe9sultats avec includeSort",id:"comprendre-lordre-des-r\xe9sultats-avec-includesort",level:5},{value:"R\xe9ponse",id:"r\xe9ponse",level:3},{value:"Quelques cas d&#39;usage",id:"quelques-cas-dusage",level:3},{value:"R\xe9cup\xe9rer tous les \xe9v\xe9nements \xe0 venir publi\xe9s sur un agenda",id:"r\xe9cup\xe9rer-tous-les-\xe9v\xe9nements-\xe0-venir-publi\xe9s-sur-un-agenda",level:4},{value:"Synchroniser une base de donn\xe9es \xe9v\xe9nementielle",id:"synchroniser-une-base-de-donn\xe9es-\xe9v\xe9nementielle",level:4},{value:"Export JSON",id:"export-json",level:3},{value:"Consulter un \xe9v\xe9nement",id:"consulter-un-\xe9v\xe9nement",level:2},{value:"Identifiant unique",id:"identifiant-unique",level:3},{value:"Identifiant externe",id:"identifiant-externe",level:3},{value:"Param\xe8tres",id:"param\xe8tres",level:3},{value:"Lecture transverse",id:"lecture-transverse",level:2}];function o(e){const n={a:"a",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",header:"header",hr:"hr",li:"li",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,i.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"lecture-d\xe9v\xe9nements",children:"Lecture d'\xe9v\xe9nements"})}),"\n",(0,t.jsx)(n.h2,{id:"lister-les-\xe9v\xe9nements-dun-agenda",children:"Lister les \xe9v\xe9nements d'un agenda"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"En bref"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"agendaUID"})," est l'identifiant unique de l'agenda o\xf9 les \xe9v\xe9nements sont r\xe9f\xe9renc\xe9s."]}),"\n",(0,t.jsxs)(n.li,{children:["Une ",(0,t.jsx)(n.a,{href:"/authentification",children:"authentification"})," en lecture ou par jeton d'acc\xe8s est requise."]}),"\n",(0,t.jsx)(n.li,{children:"La r\xe9ponse contient un segment d'\xe9v\xe9nement plut\xf4t que la liste compl\xe8te. Si le total exc\xe8de le nombre de lieux rendus en un appel, une boucle de lecture devra \xeatre mise en place."}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"filtres",children:"Filtres"}),"\n",(0,t.jsx)(n.h4,{id:"filtres-standards",children:"Filtres standards"}),"\n",(0,t.jsx)(n.p,{children:"Les param\xe8tres suivant agissent sur la s\xe9lection des \xe9v\xe9nements rendus par un appel."}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"removed"}),(0,t.jsx)(n.td,{children:"bool\xe9en(0|1|null)"}),(0,t.jsxs)(n.td,{children:["Par d\xe9faut, les \xe9v\xe9nements ayant \xe9t\xe9 retir\xe9s ou supprim\xe9s ne sont plus pr\xe9sent\xe9s dans l'agenda. Ce param\xe8tre pr\xe9cis\xe9 \xe0 ",(0,t.jsx)(n.code,{children:"1"})," en fera remonter l'identifiant ",(0,t.jsx)(n.code,{children:"uid"})," et le moment du retrait ",(0,t.jsx)(n.code,{children:"updatedAt"}),". Ceci permet aux traitements de synchronisation de suivre les retraits entre deux intervalles de suppressions."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"adminLevel4"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtrer par ville.",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?adminLevel4[]=Lausanne&city[]=Gen\xe8ve"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"adminLevel2"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["...par D\xe9partement (en France).",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?adminLevel2[]=Hauts-de-Seine"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"adminLevel1"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["...par R\xe9gion (en France).",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?adminLevel1=Normandie"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"timings[gte]"}),(0,t.jsx)(n.td,{children:"date"}),(0,t.jsxs)(n.td,{children:["...par horaire sup\xe9rieur \xe0 ...",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?timings[gte]=2025-...:00:00.000Z"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"timings[lte]"}),(0,t.jsx)(n.td,{children:"date"}),(0,t.jsxs)(n.td,{children:["Filtre par horaire inf\xe9rieur \xe0 ...",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?timings[lte]=2021-02-18T...00Z"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"updatedAt[gte]"}),(0,t.jsx)(n.td,{children:"date"}),(0,t.jsxs)(n.td,{children:["Mis \xe0 jour apr\xe8s le ...",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?updatedAt[gte]=2021-02-1...:00.000Z"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"updatedAt[lte]"}),(0,t.jsx)(n.td,{children:"date"}),(0,t.jsxs)(n.td,{children:["Mis \xe0 jour avant le ...",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?updatedAt[lte]=2021-02-...00.000Z"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"search"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Recherche synthaxique",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?search=Concert"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"uid"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtre par identifiant",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?uid[]=56158955&uid[]=55895615"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"slug"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtre par code url",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?slug=festival-dete"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"featured"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["En une",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?featured=1"})," (en une) vs ",(0,t.jsx)(n.code,{children:"?featured=0"})," (pas en une)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"relative"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Pass\xe9 / En cours / A venir",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?relative[]=passed"})," (\xe9v\xe9nements pass\xe9s), ",(0,t.jsx)(n.code,{children:"?relative[]=upcoming"})," (\xe9v\xe9nements \xe0 venir), ",(0,t.jsx)(n.code,{children:"?relative[]=current"}),"(\xe9v\xe9nements en cours: avec plages horaires pass\xe9es ET \xe0 venir)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"state"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Statut sur l'agenda",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?state=2"})," (publi\xe9 - valeur par d\xe9faut), ",(0,t.jsx)(n.code,{children:"?state=1"})," (pr\xeat \xe0 publier), ",(0,t.jsx)(n.code,{children:"?state=0"})," (\xe0 contr\xf4ler), ",(0,t.jsx)(n.code,{children:"?state=-1"})," (r\xe9fus\xe9). Les \xe9v\xe9nements non publi\xe9s ne sont accessibles que par les utilisateurs mod\xe9rateurs ou administrateurs."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"keyword"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Mots cl\xe9s",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?keyword[]=gratuit&keyword[]=exposition"})," fonction en ",(0,t.jsx)(n.code,{children:"ET"})," logique"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"geo"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtrer sur un carr\xe9 g\xe9ographique",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?geo[northEast][lat]=48.9527&geo[northEast][lng]=2.4484&geo[southWest][lat]=48.8560&geo[southWest][lng]=2.1801"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"locationUid"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtre par identifiant de lieu",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?locationUid[]=123&locationUid[]=456"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"accessibility"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtrer par accessibilit\xe9 particuli\xe8re",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?accessibility[]=hi&accessibility[]=vi"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"status"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Filtrer par \xe9tat",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?status[]=1"})]})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"filtres-de-champs-additionnels",children:"Filtres de champs additionnels"}),"\n",(0,t.jsx)(n.p,{children:"Les champs additionnels de types \xe0 choix (checkbox, radio, select) peuvent \xe9galement servir de base aux filtres. La cl\xe9 est alors le code du champ concern\xe9, les valeurs sont les identifiants \xe0 s\xe9lectionner."}),"\n",(0,t.jsxs)(n.p,{children:["Un exemple pour un champ additionnel Cat\xe9gories M\xe9tropolitaines dont le code serait ",(0,t.jsx)(n.code,{children:"categories-metropolitaines"}),":"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events?categories-metropolitaines[]=2\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Le fonctionnement des champs additionnels est d\xe9taill\xe9 ",(0,t.jsx)(n.a,{href:"/agendas/schemas",children:"ici"})]}),"\n",(0,t.jsx)(n.h3,{id:"contenu",children:"Contenu"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"detailed"}),(0,t.jsx)(n.td,{children:"bool\xe9en(0|1)"}),(0,t.jsx)(n.td,{children:"Si \xe9gal a 1, rend l'int\xe9gralit\xe9 des donn\xe9es publiques li\xe9es \xe0 chaque \xe9v\xe9nement."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"monolingual"}),(0,t.jsx)(n.td,{children:"texte"}),(0,t.jsx)(n.td,{children:"Pr\xe9ciser un code langue (fr, en, it, de) pour ne renvoyer qu'une seule langue pour les champs multilingues ou les labels de champs additionnels. Si la langue choisie n'est pas d\xe9finie, une langue disponible sera utilis\xe9e."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"longDescriptionFormat"}),(0,t.jsx)(n.td,{children:"texte"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"markdown"})," par d\xe9faut. ",(0,t.jsx)(n.code,{children:"HTML"}),": le contenu du champ longDescription est rendu au format HTML. ",(0,t.jsx)(n.code,{children:"HTMLWithEmbeds"}),": le contenu du champ longDescription est rendu au format HTML et tout lien pointant vers des contenus multim\xe9dias de plateformes connues (Youtube, Soundcloud, Eventbrite, Pixlr...) sera remplac\xe9 par un contenu int\xe9gr\xe9."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"includeLabels"}),(0,t.jsx)(n.td,{children:"bool\xe9en(0|1)"}),(0,t.jsxs)(n.td,{children:["Inclure les labels dans les champs additionnels \xe0 choix.",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:'{"categorie": 1}'})," devient ",(0,t.jsx)(n.code,{children:'{"categorie": {"id": 1, "label": {"fr": "Spectacle"}}}'}),"."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"includeFields"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsxs)(n.td,{children:["Pr\xe9cise les donn\xe9es \xe0 remonter pour chaque \xe9v\xe9nement; utile \xe0 des fins d'optimisation de temps de r\xe9ponse et de bande passante. Variante courte: ",(0,t.jsx)(n.code,{children:"if[]="})," Ex: ",(0,t.jsx)(n.code,{children:"if[]=uid&if[]=location.city"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"includeSort"}),(0,t.jsx)(n.td,{children:"bool\xe9en(0|1)"}),(0,t.jsxs)(n.td,{children:["Inclure les valeurs de tri pour chaque \xe9v\xe9nement. Permet de comprendre pourquoi les \xe9v\xe9nements apparaissent dans un ordre donn\xe9.",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:"?includeSort=1"})]})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.em,{children:(0,t.jsx)(n.strong,{children:"Pro tip"})}),": utilisez ",(0,t.jsx)(n.code,{children:"detailed"})," en d\xe9veloppement et ",(0,t.jsx)(n.code,{children:"includeFields"})," en production pour r\xe9duire le volume de donn\xe9es qui transitent et am\xe9liorer les temps de r\xe9ponse."]}),"\n",(0,t.jsx)(n.h3,{id:"navigation",children:"Navigation"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"after"}),(0,t.jsx)(n.td,{children:"texte[]"}),(0,t.jsx)(n.td,{children:"Sert \xe0 r\xe9cup\xe9rer les r\xe9sultats suivants le premier jeu d'\xe9v\xe9nements rendu, lorsque le total r\xe9sultant des filtres actifs est sup\xe9rieur au total du segment rendu."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"from"}),(0,t.jsx)(n.td,{children:"entier"}),(0,t.jsxs)(n.td,{children:["Alternative \xe0 ",(0,t.jsx)(n.code,{children:"after"}),". Permet de r\xe9cup\xe9rer les r\xe9sultats \xe0 partir du n-i\xe8me \xe9v\xe9nement. Pr\xe9f\xe9rer l'utilisation de la cl\xe9 after pour de meilleures performances, en particulier pour les lectures plus compl\xe8tes (> 500 \xe9v\xe9nements)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"size"}),(0,t.jsx)(n.td,{children:"entier"}),(0,t.jsxs)(n.td,{children:["D\xe9finit le nombre d'\xe9v\xe9nements r\xe9cup\xe9r\xe9s par appel. Valeur par d\xe9faut: ",(0,t.jsx)(n.strong,{children:"20"}),". Valeur maximale possible: ",(0,t.jsx)(n.strong,{children:"300"})]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"sort"}),(0,t.jsx)(n.td,{children:"texte"}),(0,t.jsx)(n.td,{children:"Choix du tri \xe0 appliquer"})]})]})]}),"\n",(0,t.jsx)(n.h4,{id:"tris",children:"Tris"}),"\n",(0,t.jsxs)(n.p,{children:["Les tris suivants sont possibles. Il sont \xe0 placer dans un param\xe8tre ",(0,t.jsx)(n.code,{children:"sort"}),":"]}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Valeur"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"timingsWithFeatured.asc"}),(0,t.jsx)(n.td,{children:"Tri par d\xe9faut. Ev\xe9n\xe9ments en une en premier, puis tri chronologique en fonction de la prochaine plage horaire \xe0 venir."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"timings.asc"}),(0,t.jsx)(n.td,{children:"Tri chronologique en fonction de la prochaine plage horaire \xe0 venir. Les \xe9v\xe9nements aux plages horaires \xe0 venir les plus proches d'abord jusqu'au plus lointaines \xe0 venir, suivi des \xe9v\xe9nements aux plages horaires les plus proches dans le pass\xe9 aux plus lointaines."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"lastTiming.asc"}),(0,t.jsx)(n.td,{children:"Tri chronologique en fonction de la derni\xe8re plage horaire \xe0 venir, suivi des \xe9v\xe9nements aux plages horaires les plus proches dans le pass\xe9 aux plus lointaines."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"lastTimingWithFeatured.asc"}),(0,t.jsx)(n.td,{children:"Comme lastTiming.asc mais avec les \xe9v\xe9nements en une en premier."})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"updatedAt.desc"}),(0,t.jsx)(n.td,{children:"Ev\xe9nements mis \xe0 jour le plus r\xe9cemment en premier"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"updatedAt.asc"}),(0,t.jsx)(n.td,{children:"Ev\xe9nements mis \xe0 jour le plus r\xe9cemment en dernier"})]})]})]}),"\n",(0,t.jsx)(n.h5,{id:"comprendre-lordre-des-r\xe9sultats-avec-includesort",children:"Comprendre l'ordre des r\xe9sultats avec includeSort"}),"\n",(0,t.jsxs)(n.p,{children:["Le param\xe8tre ",(0,t.jsx)(n.code,{children:"includeSort"})," permet d'obtenir une explication d\xe9taill\xe9e de l'ordre dans lequel les \xe9v\xe9nements sont retourn\xe9s. Lorsqu'il est activ\xe9, chaque \xe9v\xe9nement de la r\xe9ponse inclut un champ ",(0,t.jsx)(n.code,{children:"sort"})," contenant les valeurs utilis\xe9es pour le tri."]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Interpr\xe9tation des valeurs"})}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"featured"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"true"})," si l'\xe9v\xe9nement est en une, ",(0,t.jsx)(n.code,{children:"false"})," sinon"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"relative"}),(0,t.jsxs)(n.td,{children:["Position temporelle : ",(0,t.jsx)(n.code,{children:"'upcoming'"})," (\xe0 venir), ",(0,t.jsx)(n.code,{children:"'passed'"})," (pass\xe9)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"lastTiming"}),(0,t.jsxs)(n.td,{children:["Date de la derni\xe8re plage horaire, au format ISO (ex: ",(0,t.jsx)(n.code,{children:"2025-09-07T20:00:00.000Z"}),")"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"firstTiming"}),(0,t.jsx)(n.td,{children:"Date de la premi\xe8re plage horaire, au format ISO"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"location.*"}),(0,t.jsxs)(n.td,{children:["Valeurs de localisation (ex: ",(0,t.jsx)(n.code,{children:"location.adminLevel1"})," pour la r\xe9gion, ",(0,t.jsx)(n.code,{children:"location.adminLevel4"})," pour la ville)"]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"search"}),(0,t.jsx)(n.td,{children:"Score de pertinence de la recherche textuelle (nombre d\xe9cimal)"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"updatedAt"}),(0,t.jsx)(n.td,{children:"Date de derni\xe8re mise \xe0 jour"})]})]})]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"Exemple d'utilisation"})}),"\n",(0,t.jsx)(n.p,{children:"Pour un tri par localisation puis par date :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events?sort[]=location.region.asc&sort[]=location.region.asc&sort[]=timings.asc&includeSort=1\n"})}),"\n",(0,t.jsx)(n.p,{children:"R\xe9ponse :"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "total": 45,\n  "sort": ["location.region.asc", "location.region.asc", "timings.asc"]\n  "events": [\n    {\n      "uid": 78901,\n      "title": "Festival de musique",\n      "location": {\n        "city": "Lyon",\n        "region": "Auvergne-Rh\xf4ne-Alpes"\n      },\n      "sort": [\n        { "key": "location.adminLevel1", "value": "Auvergne-Rh\xf4ne-Alpes" },\n        { "key": "location.adminLevel4", "value": "Lyon" },\n        { "key": "relative", "value": "upcoming" },\n        { "key": "lastTiming", "value": "2025-08-15T22:00:00.000Z" }\n      ],\n      ...\n    },\n    {\n      "uid": 78902,\n      "title": "Exposition d\'art",\n      "location": {\n        "city": "Villeurbanne",\n        "region": "Auvergne-Rh\xf4ne-Alpes"\n      },\n      "sort": [\n        { "key": "location.adminLevel1", "value": "Auvergne-Rh\xf4ne-Alpes" },\n        { "key": "location.adminLevel4", "value": "Villeurbanne" },\n        { "key": "relative", "value": "upcoming" },\n        { "key": "lastTiming", "value": "2025-08-20T18:00:00.000Z" }\n      ],\n      ...\n    }\n  ]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Dans cet exemple, on voit clairement que les \xe9v\xe9nements sont d'abord group\xe9s par r\xe9gion (",(0,t.jsx)(n.code,{children:"Auvergne-Rh\xf4ne-Alpes"}),"), puis tri\xe9s par ville (",(0,t.jsx)(n.code,{children:"Lyon"})," avant ",(0,t.jsx)(n.code,{children:"Villeurbanne"}),"), et enfin par date."]}),"\n",(0,t.jsx)(n.h3,{id:"r\xe9ponse",children:"R\xe9ponse"}),"\n",(0,t.jsx)(n.p,{children:"La r\xe9ponse pr\xe9sente les donn\xe9es sous les cl\xe9s suivantes:"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"total"}),(0,t.jsx)(n.td,{children:"entier"}),(0,t.jsx)(n.td,{children:"Le nombre total de membres"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"events"}),(0,t.jsx)(n.td,{children:"objet[]"}),(0,t.jsx)(n.td,{children:"Segment d'\xe9v\xe9nements correspondants aux filtres"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"sort"}),(0,t.jsx)(n.td,{children:"texte"}),(0,t.jsx)(n.td,{children:"Tri effectif"})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"after"}),(0,t.jsx)(n.td,{children:"textes[]"}),(0,t.jsx)(n.td,{children:"Valeurs \xe0 placer dans l'appel suivant pour r\xe9cup\xe9rer le segment d'\xe9v\xe9nements suivant"})]})]})]}),"\n",(0,t.jsxs)(n.p,{children:["Les \xe9v\xe9nements sont pr\xe9sent\xe9s selon la structure d\xe9taill\xe9e ",(0,t.jsx)(n.a,{href:"/evenements/structure",children:"ici"}),"."]}),"\n",(0,t.jsx)(n.h3,{id:"quelques-cas-dusage",children:"Quelques cas d'usage"}),"\n",(0,t.jsx)(n.h4,{id:"r\xe9cup\xe9rer-tous-les-\xe9v\xe9nements-\xe0-venir-publi\xe9s-sur-un-agenda",children:"R\xe9cup\xe9rer tous les \xe9v\xe9nements \xe0 venir publi\xe9s sur un agenda"}),"\n",(0,t.jsxs)(n.p,{children:["Dans le cas o\xf9 l'objectif est de reprendre l'int\xe9gralit\xe9 des \xe9v\xe9nements correspondant \xe0 un filtre donn\xe9, une suite d'appels sera n\xe9cessaire lorsque le total exc\xe8de la taille maximale d'\xe9v\xe9nements r\xe9cup\xe9rables en un appel (",(0,t.jsx)(n.code,{children:"300"}),")."]}),"\n",(0,t.jsxs)(n.p,{children:["Pour cet exemple, le souhait est de r\xe9cup\xe9rer tous les \xe9v\xe9nements en cours et \xe0 venir publi\xe9s sur l'agenda: le filtre ",(0,t.jsx)(n.code,{children:"relative"})," sert dans ce cas. Un premier appel est fait pour r\xe9cup\xe9rer le premier segment des r\xe9sultats:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events?relative[]=current&relative[]=upcoming\n"})}),"\n",(0,t.jsx)(n.p,{children:"Le r\xe9sultat rendu a la forme suivante, il fournit les 20 premiers \xe9v\xe9nements des 872 \xe9v\xe9nements correspondants au filtre demand\xe9:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "total": 872,\n  "events": [...],\n  "after": ["0", "000001758268800", "1758472200000", "5335740"]\n}\n'})}),"\n",(0,t.jsxs)(n.p,{children:["Les valeurs fournies sous la cl\xe9 ",(0,t.jsx)(n.code,{children:"after"})," permettent de r\xe9cup\xe9rer les 20 \xe9v\xe9nements suivants:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events?relative[]=current&relative[]=upcoming&after[]=0&after[]=000001758268800&after[]=1758472200000&after[]=5335740\n"})}),"\n",(0,t.jsxs)(n.p,{children:["Et ainsi de suite jusqu'\xe0 arriver aux derniers \xe9v\xe9nements. La derni\xe8re r\xe9ponse fournira un ",(0,t.jsx)(n.code,{children:"after"})," \xe0 ",(0,t.jsx)(n.code,{children:"null"})," indiquant qu'il n'y a plus d'autres \xe9v\xe9nements \xe0 r\xe9cup\xe9rer."]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "total": 872,\n  "events": [...],\n  "after": null\n}\n'})}),"\n",(0,t.jsx)(n.hr,{}),"\n",(0,t.jsx)(n.h4,{id:"synchroniser-une-base-de-donn\xe9es-\xe9v\xe9nementielle",children:"Synchroniser une base de donn\xe9es \xe9v\xe9nementielle"}),"\n",(0,t.jsxs)(n.p,{children:["Un script synchronisant la programmation d'un agenda avec une base tiers \xe0 intervalle r\xe9gulier peut fonctionner en r\xe9cup\xe9rant l'int\xe9gralit\xe9 de la programmation lors de sa premi\xe8re execution puis en se ",(0,t.jsx)(n.strong,{children:"limitant"})," au traitement des ",(0,t.jsx)(n.strong,{children:"ajouts, modifications et suppressions"})," entre chaque nouvelle execution. Les param\xe8tres suivants sont utiles pour y parvenir:"]}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"updatedAt[gte]"}),": pr\xe9ciser la derni\xe8re execution du script pour limiter la s\xe9lection aux \xe9v\xe9nements mis \xe0 jour depuis"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"removed"}),": ",(0,t.jsx)(n.code,{children:"null"})," pour ",(0,t.jsx)(n.strong,{children:"inclure"})," les \xe9v\xe9nements qui ont \xe9t\xe9 retir\xe9s de la programmation"]}),"\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.strong,{children:"sort"}),": ",(0,t.jsx)(n.code,{children:"updatedAt.asc"}),": optionnellement, trier la s\xe9lection suivant l'ordre des mise \xe0 jour pour simplifier la lecture"]}),"\n"]}),"\n",(0,t.jsx)(n.p,{children:"... et dans cet exemple, nous ne nous int\xe9ressons qu'aux textes fran\xe7ais."}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events?updatedAt[gte]=2025-07-11T13:49:58.000Z&removed=null&monolingual=fr\n"})}),"\n",(0,t.jsx)(n.p,{children:"Le r\xe9sultat ressemblera \xe0 ceci:"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-json",children:'{\n  "total": 462,\n  "events": [\n    {\n      "uid": 50976230,\n      "removed": true,\n      "updatedAt": "2025-07-11T13:49:59.024Z"\n    },\n    {\n      "uid": 1325588,\n      "removed": false,\n      "updatedAt": "2025-07-11T13:52:05.000Z",\n      "createdAt": "2025-07-11T13:52:05.000Z",\n      "title": "Visite de l\'H\xf4tel de ville de Belfort",\n      ...\n    },\n    ...\n  ],\n  "after": ["1753800986069", "43733206"]\n}\n'})}),"\n",(0,t.jsx)(n.p,{children:"Les identifiants des \xe9v\xe9nements retir\xe9s suffisent pour r\xe9percuter l'op\xe9ration de retrait sur la base synchronis\xe9e, les autres \xe9v\xe9nements peuvent \xeatre soit cr\xe9\xe9s, soit mis \xe0 jour"}),"\n",(0,t.jsx)(n.h3,{id:"export-json",children:"Export JSON"}),"\n",(0,t.jsxs)(n.p,{children:["L'export JSON anciennement propos\xe9 sur la modale d'export des agendas OpenAgenda est ",(0,t.jsx)(n.strong,{children:"en fin de vie"}),". La documentation de cet export ",(0,t.jsx)(n.a,{href:"/evenements/export-json",children:"est consultable ici"}),", une aide pour migrer les synchronisations ",(0,t.jsx)(n.a,{href:"/evenements/export-json-migration",children:"est propos\xe9e ici"}),"."]}),"\n",(0,t.jsx)(n.h2,{id:"consulter-un-\xe9v\xe9nement",children:"Consulter un \xe9v\xe9nement"}),"\n",(0,t.jsx)(n.h3,{id:"identifiant-unique",children:"Identifiant unique"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events/{eventUID}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"En bref"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"agendaUID"})," est l'identifiant unique de l'agenda o\xf9 l'\xe9v\xe9nement est r\xe9f\xe9renc\xe9, ",(0,t.jsx)(n.code,{children:"eventUID"})," son identifiant unique (uid)."]}),"\n",(0,t.jsxs)(n.li,{children:["Une ",(0,t.jsx)(n.a,{href:"/authentification",children:"authentification"})," en lecture ou par jeton d'acc\xe8s est requise."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"identifiant-externe",children:"Identifiant externe"}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/agendas/{agendaUID}/events/ext/{key}/{value}\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"En bref"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:[(0,t.jsx)(n.code,{children:"agendaUID"})," est l'identifiant unique de l'agenda o\xf9 l'\xe9v\xe9nement est r\xe9f\xe9renc\xe9, ",(0,t.jsx)(n.code,{children:"key"})," est le code de l'identifiant externe (extId) et ",(0,t.jsx)(n.code,{children:"value"})," sa valeur."]}),"\n",(0,t.jsxs)(n.li,{children:["Une ",(0,t.jsx)(n.a,{href:"/authentification",children:"authentification"})," en lecture ou par jeton d'acc\xe8s est requise."]}),"\n"]}),"\n",(0,t.jsx)(n.h3,{id:"param\xe8tres",children:"Param\xe8tres"}),"\n",(0,t.jsxs)(n.table,{children:[(0,t.jsx)(n.thead,{children:(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.th,{children:"Cl\xe9"}),(0,t.jsx)(n.th,{children:"Type"}),(0,t.jsx)(n.th,{children:"Description"})]})}),(0,t.jsxs)(n.tbody,{children:[(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"longDescriptionFormat"}),(0,t.jsx)(n.td,{children:"texte"}),(0,t.jsxs)(n.td,{children:[(0,t.jsx)(n.code,{children:"markdown"})," par d\xe9faut. ",(0,t.jsx)(n.code,{children:"HTML"}),": le contenu du champ longDescription est rendu au format HTML. ",(0,t.jsx)(n.code,{children:"HTMLWithEmbeds"}),": le contenu du champ longDescription est rendu au format HTML et tout lien pointant vers des contenus multim\xe9dias de plateformes connues (Youtube, Soundcloud, Eventbrite, Pixlr...) sera remplac\xe9 par un contenu int\xe9gr\xe9."]})]}),(0,t.jsxs)(n.tr,{children:[(0,t.jsx)(n.td,{children:"includeLabels"}),(0,t.jsx)(n.td,{children:"bool\xe9en(0|1)"}),(0,t.jsxs)(n.td,{children:["Inclure les labels dans les champs additionnels \xe0 choix.",(0,t.jsx)("br",{}),"Exemple: ",(0,t.jsx)(n.code,{children:'{"categorie": 1}'})," devient ",(0,t.jsx)(n.code,{children:'{"categorie": {"id": 1, "label": {"fr": "Spectacle"}}}'}),"."]})]})]})]}),"\n",(0,t.jsx)(n.h2,{id:"lecture-transverse",children:"Lecture transverse"}),"\n",(0,t.jsxs)(n.p,{children:["Permet de lister les \xe9v\xe9nements r\xe9cents et \xe0 venir publi\xe9s sur des agendas publiques index\xe9s sur OpenAgenda. Cette fonction est en exp\xe9rimentation. Pour la tester, contactez-nous en envoyant un email \xe0 ",(0,t.jsx)(n.a,{href:"mailto:support@openagenda.com",children:"support@openagenda.com"})]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-bash",children:"GET /v2/events\n"})}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.strong,{children:"En bref"})}),"\n",(0,t.jsxs)(n.ul,{children:["\n",(0,t.jsxs)(n.li,{children:["Une ",(0,t.jsx)(n.a,{href:"/authentification",children:"authentification"})," en lecture ou par jeton d'acc\xe8s est requise."]}),"\n",(0,t.jsxs)(n.li,{children:["Les param\xe8tres pour cette route sont les m\xeames que ",(0,t.jsx)(n.a,{href:"/evenements/lecture#lister-les-%C3%A9v%C3%A9nements-dun-agenda",children:"ceux propos\xe9s pour la lecture d'\xe9v\xe9nements d'un agenda"}),". Seules les valeurs propres aux agendas (statut, champs additionnels, mise en une) n'ont pas d'equivalence dans la recherche transverse. Les donn\xe9es en r\xe9ponse sont \xe9galement structur\xe9es de la m\xeame mani\xe8re."]}),"\n",(0,t.jsxs)(n.li,{children:["Les \xe9v\xe9nements pass\xe9s sont r\xe9guli\xe8rement retir\xe9s de l'index transverse. Le filtre ",(0,t.jsx)(n.code,{children:"relative"})," est utile pour les exclure des lectures: ",(0,t.jsx)(n.code,{children:"?relative[]=current&relative[]=upcoming"}),"."]}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(o,{...e})}):o(e)}}}]);